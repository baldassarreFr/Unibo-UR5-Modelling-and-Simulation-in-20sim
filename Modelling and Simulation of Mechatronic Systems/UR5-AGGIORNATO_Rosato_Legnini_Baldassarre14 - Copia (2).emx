<?xml version="1.0" encoding="UTF-8"?>
<Document>
 <Model version="5.1" build="5.1.4.13773">
  <Sidops><![CDATA[model 128 184
 description '<Information>
  <Description>
    <Version>5.1</Version>
    <IsMainModel>0</IsMainModel>
    <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>E:\Universit&agrave;\OneDrive - Alma Mater Studiorum Universit&agrave; di Bologna\UR5_Legnini-Rosato\UR5-AGGIORNATO_Rosato_Legnini_Baldassarre14 - Copia (2).emx</LibraryPath>
    <TimeStamp>2025-5-28 02:18:19</TimeStamp>
  </Description>
  <Attributes>
    <GlobalRelations>parameters
// essentials
	real g = 9.81;
//	real C = 1e-20;
//	real r = 1e3;
	real Kd = 0.1;
	real Kp = 0.1;
// DH parameters [theta, d, a, alpha]
	real DH[6,4] = [0, 0.089159, 0, pi/2;
						 0, 0, -0.425, 0;
						 0, 0, -0.39225, 0;
						 0, 0.10915, 0, pi/2;
						 0, 0.09465, 0, -pi/2;
						 0, 0.0823, 0, 0];

// masses
	real m1 = 3.7;
	real m2 = 8.393;
	real m3 = 2.33;
	real m4 = 1.1219;
	real m5 = 1.1219;
	real m6 = 0.1879;

// distance r between the gravity center G and i-th DH frame, for each link 
	real r_G1[3,1] = [0.0; -0.02561; 0.00193];
	real r_G2[3,1] = [0.2125; 0.0; 0.11336];
	real r_G3[3,1] = [0.15; 0.0; 0.0265];
	real r_G4[3,1] = [0.0; -0.0018; 0.01634];
	real r_G5[3,1] = [0.0; 0.0018; 0.01634];
	real r_G6[3,1] = [0.0; 0.0; -0.001159];

	// inertia tensors
	real J1[3,3] = [0.0067, 0, 0;
							 0, 0.00640, 0;
							 0, 0, 0.0067];

	real J2[3,3] = [0.0149, 0, 0;
							 0, 0.3564, 0;
							 0, 0, 0.3553];

	real J3[3,3] = [0.0025, 0, 0.0034;
							 0, 0.0551, 0;
							 0.0034, 0, 0.0546];

	real J4[3,3] = [0.0012, 0, 0;
							 0, 0.0012, 0;
							 0, 0, 0.0009];

	real J5[3,3] = [0.0012, 0, 0;
							 0, 0.0012, 0;
							 0, 0, 0.0009];

	real J6[3,3] = [0.0001, 0, 0;
							 0, 0.0001, 0;
							 0, 0, 0.0001];

//computation of cos and sin
	real cos_alpha1 = cos(DH[1,4]);
	real cos_alpha2 = cos(DH[2,4]);
	real cos_alpha3 = cos(DH[3,4]);
	real cos_alpha4 = cos(DH[4,4]);
	real cos_alpha5 = cos(DH[5,4]);
	real cos_alpha6 = cos(DH[6,4]);

	real sin_alpha1 = sin(DH[1,4]);
	real sin_alpha2 = sin(DH[2,4]);
	real sin_alpha3 = sin(DH[3,4]);
	real sin_alpha4 = sin(DH[4,4]);
	real sin_alpha5 = sin(DH[5,4]);
	real sin_alpha6 = sin(DH[6,4]);

	real cos_theta1 = cos(DH[1,1]);
	real cos_theta2 = cos(DH[2,1]);
	real cos_theta3 = cos(DH[3,1]);
	real cos_theta4 = cos(DH[4,1]);
	real cos_theta5 = cos(DH[5,1]);
	real cos_theta6 = cos(DH[6,1]);

	real sin_theta1 = sin(DH[1,1]);
	real sin_theta2 = sin(DH[2,1]);
	real sin_theta3 = sin(DH[3,1]);
	real sin_theta4 = sin(DH[4,1]);
	real sin_theta5 = sin(DH[5,1]);
	real sin_theta6 = sin(DH[6,1]);

	//computation of homogeneuos matrix
	real H_01[4,4] = [cos_theta1, -sin_theta1*cos_alpha1, sin_theta1*sin_alpha1, DH[1,3]*cos_theta1;
				sin_theta1, cos_theta1*cos_alpha1, -cos_theta1*sin_alpha1,  DH[1,3]*sin_theta1;
				0, sin_alpha1, cos_alpha1, DH[1,2];
				0, 0, 0, 1];

	real H_12[4,4] = [cos_theta2, -sin_theta2*cos_alpha2, sin_theta2*sin_alpha2, DH[2,3]*cos_theta2;
				sin_theta2, cos_theta2*cos_alpha2, -cos_theta2*sin_alpha2,  DH[2,3]*sin_theta2;
				0, sin_alpha2, cos_alpha2, DH[2,2];
				0, 0, 0, 1];

	real H_23[4,4] = [cos_theta3, -sin_theta3*cos_alpha3, sin_theta3*sin_alpha3, DH[3,3]*cos_theta3;
				sin_theta3, cos_theta3*cos_alpha3, -cos_theta3*sin_alpha3,  DH[3,3]*sin_theta3;
				0, sin_alpha3, cos_alpha3, DH[3,2];
				0, 0, 0, 1];

	real H_34[4,4] = [cos_theta4, -sin_theta4*cos_alpha4, sin_theta4*sin_alpha4, DH[4,3]*cos_theta4;
				sin_theta4, cos_theta4*cos_alpha4, -cos_theta4*sin_alpha4,  DH[4,3]*sin_theta4;
				0, sin_alpha4, cos_alpha4, DH[4,2];
				0, 0, 0, 1];

	real H_45[4,4] = [cos_theta5, -sin_theta5*cos_alpha5, sin_theta5*sin_alpha5, DH[5,3]*cos_theta5;
				sin_theta5, cos_theta5*cos_alpha5, -cos_theta5*sin_alpha5,  DH[5,3]*sin_theta5;
				0, sin_alpha5, cos_alpha5, DH[5,2];
				0, 0, 0, 1];

	real H_56[4,4] = [cos_theta6, -sin_theta6*cos_alpha6, sin_theta6*sin_alpha6, DH[6,3]*cos_theta6;
				sin_theta6, cos_theta6*cos_alpha6, -cos_theta6*sin_alpha6,  DH[6,3]*sin_theta6;
				0, sin_alpha6, cos_alpha6, DH[6,2];
				0, 0, 0, 1];</GlobalRelations>
  </Attributes>
</Information>';
 type 'Mainmodel- Copia'
 end;
 implementation bg
  submodels
   Demux 511.5 240.5
			specifications active 'outputs_6'
				specification 'outputs_2'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal in input [2,1];
   signal out output2;
 end;
 icon bg bottom
  figures
   line 0 0 0 32 color 0 width 2;
   rectangle 0 0 16 32 color -1;
   text '2' 6 28 color 8421504 8;
  terminals
   output1 0 8 fixed;
   input 0 16 fixed;
   output2 0 24 fixed;
 end;
 implementation eq
equations
	[output1; output2] = input;implementation_end;
specification_end;
				specification 'outputs_3'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal in input [3,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 32 width 2;
   rectangle 0 0 16 32 color -1;
   text '3' 6 26 color 8421504 8;
  terminals
   output1 0 8 fixed;
   output2 0 16 fixed;
   output3 0 24 fixed;
   input 0 16 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3] = input;implementation_end;
specification_end;
				specification 'outputs_4'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal in input [4,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 48 width 2;
   rectangle 0 0 16 48 color -1;
   text '4' 6 42 color 8421504 8;
  terminals
   output1 0 8 fixed;
   output2 0 16 fixed;
   output3 0 32 fixed;
   output4 0 40 fixed;
   input 0 24 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4] = input;implementation_end;
specification_end;
				specification 'outputs_5'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal in input [5,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 48 width 2;
   rectangle 0 0 16 48 color -1;
   text '5' 6 42 color 8421504 8;
  terminals
   output1 0 8 fixed;
   output2 0 16 fixed;
   output3 0 24 fixed;
   output4 0 32 fixed;
   output5 0 40 fixed;
   input 0 24 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5] = input;implementation_end;
specification_end;
				specification 'outputs_6'
 description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal in input [1,6];
 end;
 icon bg bottom
  figures
   line 479.5 247.5 543.5 247.5 color 0 width 2;
   rectangle 479.5 231.5 543.5 247.5 color -1;
   text '6' 537.5 241.5 color 8421504 8;
  terminals
   output1 487.5 247.5 fixed;
   output2 495.5 247.5 fixed;
   output3 503.5 247.5 fixed;
   output4 519.5 247.5 fixed;
   output5 527.5 247.5 fixed;
   output6 535.5 247.5 fixed;
   input 511.5 247.5 fixed;
 end;
 implementation eq
equations
	[output1, output2, output3, output4, output5, output6] = input;implementation_end;
specification_end;
				specification 'outputs_7'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal in input [7,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 64 width 2;
   rectangle 0 0 16 64 color -1;
   text '7' 6 58 color 8421504 8;
  terminals
   output1 0 8 fixed;
   output2 0 16 fixed;
   output3 0 24 fixed;
   output4 0 32 fixed;
   output5 0 40 fixed;
   output6 0 48 fixed;
   output7 0 56 fixed;
   input 0 32 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7] = input;implementation_end;
specification_end;
				specification 'outputs_8'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal in input [8,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 80 width 2;
   rectangle 0 0 16 80 color -1;
   text '8' 6 72 color 8421504 8;
  terminals
   output1 0 8 fixed;
   output2 0 16 fixed;
   output3 0 24 fixed;
   output4 0 32 fixed;
   output5 0 48 fixed;
   output6 0 56 fixed;
   output7 0 64 fixed;
   output8 0 72 fixed;
   input 0 40 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8] = input;implementation_end;
specification_end;
				specification 'outputs_9'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Demux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Demux
  ports
   signal out output1;
   signal out output2;
   signal out output3;
   signal out output4;
   signal out output5;
   signal out output6;
   signal out output7;
   signal out output8;
   signal out output9;
   signal in input [9,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 80 width 2;
   rectangle 0 0 16 80  color -1;
   text '9' 6 74 color 8421504 8;
  terminals
   output1 0 8 fixed;
   output2 0 16 fixed;
   output3 0 24 fixed;
   output4 0 32 fixed;
   output5 0 40 fixed;
   output6 0 48 fixed;
   output7 0 56 fixed;
   output8 0 64 fixed;
   output9 0 72 fixed;
   input 0 40 fixed;
 end;
 implementation eq
equations
	[output1; output2; output3; output4; output5; output6; output7; output8; output9] = input;implementation_end;
specification_end;
			end;
   FlowSensor1 32 79.9
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
    knot FlowSensor
     ports
      power knot in p1 [1];
      power knot out p2 [1];
      signal knot out flow [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 25.1 72.8 38.9 87.1 color 0 fill 16777215;
      text 'f' 32 79.2 color 0;
    end;
    implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
   FlowSensor2 216 79.9
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
    knot FlowSensor
     ports
      power knot in p1 [1];
      power knot out p2 [1];
      signal knot out flow [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 209.1 72.8 222.9 87.1 color 0 fill 16777215;
      text 'f' 216 79.2 color 0;
    end;
    implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
   FlowSensor3 392 79.9
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
    knot FlowSensor
     ports
      power knot in p1 [1];
      power knot out p2 [1];
      signal knot out flow [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 385.1 72.8 398.9 87.1 color 0 fill 16777215;
      text 'f' 392 79.2 color 0;
    end;
    implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
   FlowSensor4 584 79.9
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
    knot FlowSensor
     ports
      power knot in p1 [1];
      power knot out p2 [1];
      signal knot out flow [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 577.1 72.8 590.9 87.1 color 0 fill 16777215;
      text 'f' 584 79.2 color 0;
    end;
    implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
   FlowSensor5 784 79.9
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
    knot FlowSensor
     ports
      power knot in p1 [1];
      power knot out p2 [1];
      signal knot out flow [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 777.1 72.8 790.9 87.1 color 0 fill 16777215;
      text 'f' 784 79.2 color 0;
    end;
    implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
   FlowSensor6 976 79.9
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
    knot FlowSensor
     ports
      power knot in p1 [1];
      power knot out p2 [1];
      signal knot out flow [1];
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg ellipse
     figures
      ellipse 969.1 72.8 982.9 87.1 color 0 fill 16777215;
      text 'f' 976 79.2 color 0;
    end;
    implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
   HD1 35 145
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
    type 'Submodel-Graphical'
     ports
      power in θ_dot_input;
      power out θ_dot_output;
    end;
    implementation bg
     submodels
      C 376 48
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\C.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:58:35</TimeStamp>
</Description>
</Information>';
       type C
        ports
         power in input;
         signal out phi;
        restrictions
         causality preferred out input;
       end;
       icon bg ellipse bottom
        figures
         text 'C' 376 48 color 0 18 bold;
       end;
       implementation eq
variables
	real phi1;
	real phi2;
parameters
	real k1 = 16e3;
	real k2 = 25e3;
	real k3 = 29e3;
	real T1 = 7;
	real T2 = 25;
equations
	phi = int(input.f);
	phi1 = T1/k1;
	phi2 = T1/k1 + (T2 - T1)/k2;
	
	//input.e is the torque
	
	if phi <= phi1 and phi >= -phi1 then
		input.e = phi * k1;
	elsif phi <= phi2 and phi >= -phi2 then
		input.e = (phi - sign(phi)*phi1) * k2 + sign(phi)*T1;
	else 
		input.e = (phi - sign(phi)*phi2)*k3 + sign(phi)*T2;
	end;
		implementation_end;
      I 184 40
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
       type I
        ports
         power in p;
         signal out state;
        restrictions
         causality preferred in p;
       end;
       icon bg ellipse bottom
        figures
         text 'I' 184 40 color 0 18 bold;
       end;
       implementation eq
parameters
	real i = 0.404e-4;
equations
    state = int(p.e);
    p.f = state / i;
implementation_end;
      plug θ_dot_input 104 120;
      plug θ_dot_output 584 120;
      OneJunction 184 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 184 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 480 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 480 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R 184 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_input;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 184 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4;
	real B_minus = -0.007;
	real B_plus = 0.008;

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_input.f < 0 then
		B_viscous * θ_dot_input.f + B_minus
	else 
		if θ_dot_input.f > 0 then
			B_viscous * θ_dot_input.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_input.e = B_tilde;
implementation_end;
      R1 480 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_output;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 480 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4; 
	real B_minus = -0.007; // da cambiare?????
	real B_plus = 0.008;	// da cambiare?????

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_output.f < 0 then
		B_viscous * θ_dot_output.f + B_minus
	else 
		if θ_dot_output.f > 0 then
			B_viscous * θ_dot_output.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_output.e = B_tilde;
implementation_end;
      TF 280 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\TF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:43:47</TimeStamp>
</Description>
</Information>';
       type TF
        ports
         power in p1;
         power out p2;
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 280 120 color 0 18 bold;
       end;
       implementation eq
parameters
	real r = -100;
equations
	p2.e = r * p1.e;
	p1.f = r * p2.f;

implementation_end;
      ZeroJunction 376 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 376 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      OneJunction\p => I\p;
      OneJunction\p => R\θ_dot_input;
      OneJunction\p => TF\p1;
      OneJunction1\p => R1\θ_dot_output;
      OneJunction1\p => θ_dot_output;
      TF\p2 => ZeroJunction\p;
      ZeroJunction\p => C\input;
      ZeroJunction\p => OneJunction1\p;
      θ_dot_input => OneJunction\p;
     end;
    implementation_end;
   HD2 219 145
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
    type 'Submodel-Graphical'
     ports
      power in θ_dot_input;
      power out θ_dot_output;
    end;
    implementation bg
     submodels
      C 376 48
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\C.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:58:35</TimeStamp>
</Description>
</Information>';
       type C
        ports
         power in input;
         signal out phi;
        restrictions
         causality preferred out input;
       end;
       icon bg ellipse bottom
        figures
         text 'C' 376 48 color 0 18 bold;
       end;
       implementation eq
variables
	real phi1;
	real phi2;
parameters
	real k1 = 16e3;
	real k2 = 25e3;
	real k3 = 29e3;
	real T1 = 7;
	real T2 = 25;
equations
	phi = int(input.f);
	phi1 = T1/k1;
	phi2 = T1/k1 + (T2 - T1)/k2;
	
	//input.e is the torque
	
	if phi <= phi1 and phi >= -phi1 then
		input.e = phi * k1;
	elsif phi <= phi2 and phi >= -phi2 then
		input.e = (phi - sign(phi)*phi1) * k2 + sign(phi)*T1;
	else 
		input.e = (phi - sign(phi)*phi2)*k3 + sign(phi)*T2;
	end;
		implementation_end;
      I 184 40
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
       type I
        ports
         power in p;
         signal out state;
        restrictions
         causality preferred in p;
       end;
       icon bg ellipse bottom
        figures
         text 'I' 184 40 color 0 18 bold;
       end;
       implementation eq
parameters
	real i = 0.404e-4;
equations
    state = int(p.e);
    p.f = state / i;
implementation_end;
      plug θ_dot_input 104 120;
      plug θ_dot_output 584 120;
      OneJunction 184 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 184 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 480 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 480 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R 184 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_input;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 184 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4;
	real B_minus = -0.007;
	real B_plus = 0.008;

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_input.f < 0 then
		B_viscous * θ_dot_input.f + B_minus
	else 
		if θ_dot_input.f > 0 then
			B_viscous * θ_dot_input.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_input.e = B_tilde;
implementation_end;
      R1 480 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_output;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 480 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4; 
	real B_minus = -0.007; // da cambiare?????
	real B_plus = 0.008;	// da cambiare?????

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_output.f < 0 then
		B_viscous * θ_dot_output.f + B_minus
	else 
		if θ_dot_output.f > 0 then
			B_viscous * θ_dot_output.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_output.e = B_tilde;
implementation_end;
      TF 280 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\TF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:43:47</TimeStamp>
</Description>
</Information>';
       type TF
        ports
         power in p1;
         power out p2;
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 280 120 color 0 18 bold;
       end;
       implementation eq
parameters
	real r = -100;
equations
	p2.e = r * p1.e;
	p1.f = r * p2.f;

implementation_end;
      ZeroJunction 376 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 376 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      OneJunction\p => I\p;
      OneJunction\p => R\θ_dot_input;
      OneJunction\p => TF\p1;
      OneJunction1\p => R1\θ_dot_output;
      OneJunction1\p => θ_dot_output;
      TF\p2 => ZeroJunction\p;
      ZeroJunction\p => C\input;
      ZeroJunction\p => OneJunction1\p;
      θ_dot_input => OneJunction\p;
     end;
    implementation_end;
   HD3 395 145
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
    type 'Submodel-Graphical'
     ports
      power in θ_dot_input;
      power out θ_dot_output;
    end;
    implementation bg
     submodels
      C 376 48
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\C.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:58:35</TimeStamp>
</Description>
</Information>';
       type C
        ports
         power in input;
         signal out phi;
        restrictions
         causality preferred out input;
       end;
       icon bg ellipse bottom
        figures
         text 'C' 376 48 color 0 18 bold;
       end;
       implementation eq
variables
	real phi1;
	real phi2;
parameters
	real k1 = 16e3;
	real k2 = 25e3;
	real k3 = 29e3;
	real T1 = 7;
	real T2 = 25;
equations
	phi = int(input.f);
	phi1 = T1/k1;
	phi2 = T1/k1 + (T2 - T1)/k2;
	
	//input.e is the torque
	
	if phi <= phi1 and phi >= -phi1 then
		input.e = phi * k1;
	elsif phi <= phi2 and phi >= -phi2 then
		input.e = (phi - sign(phi)*phi1) * k2 + sign(phi)*T1;
	else 
		input.e = (phi - sign(phi)*phi2)*k3 + sign(phi)*T2;
	end;
		implementation_end;
      I 184 40
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
       type I
        ports
         power in p;
         signal out state;
        restrictions
         causality preferred in p;
       end;
       icon bg ellipse bottom
        figures
         text 'I' 184 40 color 0 18 bold;
       end;
       implementation eq
parameters
	real i = 0.404e-4;
equations
    state = int(p.e);
    p.f = state / i;
implementation_end;
      plug θ_dot_input 104 120;
      plug θ_dot_output 584 120;
      OneJunction 184 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 184 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 480 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 480 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R 184 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_input;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 184 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4;
	real B_minus = -0.007;
	real B_plus = 0.008;

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_input.f < 0 then
		B_viscous * θ_dot_input.f + B_minus
	else 
		if θ_dot_input.f > 0 then
			B_viscous * θ_dot_input.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_input.e = B_tilde;
implementation_end;
      R1 480 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_output;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 480 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4; 
	real B_minus = -0.007; // da cambiare?????
	real B_plus = 0.008;	// da cambiare?????

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_output.f < 0 then
		B_viscous * θ_dot_output.f + B_minus
	else 
		if θ_dot_output.f > 0 then
			B_viscous * θ_dot_output.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_output.e = B_tilde;
implementation_end;
      TF 280 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\TF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:43:47</TimeStamp>
</Description>
</Information>';
       type TF
        ports
         power in p1;
         power out p2;
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 280 120 color 0 18 bold;
       end;
       implementation eq
parameters
	real r = -100;
equations
	p2.e = r * p1.e;
	p1.f = r * p2.f;

implementation_end;
      ZeroJunction 376 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 376 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      OneJunction\p => I\p;
      OneJunction\p => R\θ_dot_input;
      OneJunction\p => TF\p1;
      OneJunction1\p => R1\θ_dot_output;
      OneJunction1\p => θ_dot_output;
      TF\p2 => ZeroJunction\p;
      ZeroJunction\p => C\input;
      ZeroJunction\p => OneJunction1\p;
      θ_dot_input => OneJunction\p;
     end;
    implementation_end;
   HD4 587 145
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
    type 'Submodel-Graphical'
     ports
      power in θ_dot_input;
      power out θ_dot_output;
    end;
    implementation bg
     submodels
      C 376 48
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\C.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:58:35</TimeStamp>
</Description>
</Information>';
       type C
        ports
         power in input;
         signal out phi;
        restrictions
         causality preferred out input;
       end;
       icon bg ellipse bottom
        figures
         text 'C' 376 48 color 0 18 bold;
       end;
       implementation eq
variables
	real phi1;
	real phi2;
parameters
	real k1 = 47e2;
	real k2 = 61e2;
	real k3 = 70e2;
	real T1 = 2;
	real T2 = 6.9;
equations
	phi = int(input.f);
	phi1 = T1/k1;
	phi2 = T1/k1 + (T2 - T1)/k2;
	
	//input.e is the torque
	
	if phi <= phi1 and phi >= -phi1 then
		input.e = phi * k1;
	elsif phi <= phi2 and phi >= -phi2 then
		input.e = (phi - sign(phi)*phi1) * k2 + sign(phi)*T1;
	else 
		input.e = (phi - sign(phi)*phi2)*k3 + sign(phi)*T2;
	end;
		implementation_end;
      I 184 40
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
       type I
        ports
         power in p;
         signal out state;
        restrictions
         causality preferred in p;
       end;
       icon bg ellipse bottom
        figures
         text 'I' 184 40 color 0 18 bold;
       end;
       implementation eq
parameters
	real i = 0.091e-4;
equations
    state = int(p.e);
    p.f = state / i;
implementation_end;
      plug θ_dot_input 104 120;
      plug θ_dot_output 584 120;
      OneJunction 184 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 184 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 480 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 480 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R 184 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_input;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 184 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4;
	real B_minus = -0.007;
	real B_plus = 0.008;

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_input.f < 0 then
		B_viscous * θ_dot_input.f + B_minus
	else 
		if θ_dot_input.f > 0 then
			B_viscous * θ_dot_input.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_input.e = B_tilde;
implementation_end;
      R1 480 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_output;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 480 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4; 
	real B_minus = -0.007; // da cambiare?????
	real B_plus = 0.008;	// da cambiare?????

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_output.f < 0 then
		B_viscous * θ_dot_output.f + B_minus
	else 
		if θ_dot_output.f > 0 then
			B_viscous * θ_dot_output.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_output.e = B_tilde;
implementation_end;
      TF 280 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\TF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:43:47</TimeStamp>
</Description>
</Information>';
       type TF
        ports
         power in p1;
         power out p2;
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 280 120 color 0 18 bold;
       end;
       implementation eq
parameters
	real r = -100;
equations
	p2.e = r * p1.e;
	p1.f = r * p2.f;

implementation_end;
      ZeroJunction 376 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 376 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      OneJunction\p => I\p;
      OneJunction\p => R\θ_dot_input;
      OneJunction\p => TF\p1;
      OneJunction1\p => R1\θ_dot_output;
      OneJunction1\p => θ_dot_output;
      TF\p2 => ZeroJunction\p;
      ZeroJunction\p => C\input;
      ZeroJunction\p => OneJunction1\p;
      θ_dot_input => OneJunction\p;
     end;
    implementation_end;
   HD5 787 145
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
    type 'Submodel-Graphical'
     ports
      power in θ_dot_input;
      power out θ_dot_output;
    end;
    implementation bg
     submodels
      C 376 48
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\C.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:58:35</TimeStamp>
</Description>
</Information>';
       type C
        ports
         power in input;
         signal out phi;
        restrictions
         causality preferred out input;
       end;
       icon bg ellipse bottom
        figures
         text 'C' 376 48 color 0 18 bold;
       end;
       implementation eq
variables
	real phi1;
	real phi2;
parameters
	real k1 = 47e2;
	real k2 = 61e2;
	real k3 = 70e2;
	real T1 = 2;
	real T2 = 6.9;
equations
	phi = int(input.f);
	phi1 = T1/k1;
	phi2 = T1/k1 + (T2 - T1)/k2;
	
	//input.e is the torque
	
	if phi <= phi1 and phi >= -phi1 then
		input.e = phi * k1;
	elsif phi <= phi2 and phi >= -phi2 then
		input.e = (phi - sign(phi)*phi1) * k2 + sign(phi)*T1;
	else 
		input.e = (phi - sign(phi)*phi2)*k3 + sign(phi)*T2;
	end;
		implementation_end;
      I 184 40
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
       type I
        ports
         power in p;
         signal out state;
        restrictions
         causality preferred in p;
       end;
       icon bg ellipse bottom
        figures
         text 'I' 184 40 color 0 18 bold;
       end;
       implementation eq
parameters
	real i = 0.091e-4;
equations
    state = int(p.e);
    p.f = state / i;
implementation_end;
      plug θ_dot_input 104 120;
      plug θ_dot_output 584 120;
      OneJunction 184 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 184 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 480 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 480 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R 184 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_input;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 184 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4;
	real B_minus = -0.007;
	real B_plus = 0.008;

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_input.f < 0 then
		B_viscous * θ_dot_input.f + B_minus
	else 
		if θ_dot_input.f > 0 then
			B_viscous * θ_dot_input.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_input.e = B_tilde;
implementation_end;
      R1 480 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_output;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 480 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4; 
	real B_minus = -0.007; // da cambiare?????
	real B_plus = 0.008;	// da cambiare?????

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_output.f < 0 then
		B_viscous * θ_dot_output.f + B_minus
	else 
		if θ_dot_output.f > 0 then
			B_viscous * θ_dot_output.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_output.e = B_tilde;
implementation_end;
      TF 280 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\TF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:43:47</TimeStamp>
</Description>
</Information>';
       type TF
        ports
         power in p1;
         power out p2;
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 280 120 color 0 18 bold;
       end;
       implementation eq
parameters
	real r = -100;
equations
	p2.e = r * p1.e;
	p1.f = r * p2.f;

implementation_end;
      ZeroJunction 376 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 376 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      OneJunction\p => I\p;
      OneJunction\p => R\θ_dot_input;
      OneJunction\p => TF\p1;
      OneJunction1\p => R1\θ_dot_output;
      OneJunction1\p => θ_dot_output;
      TF\p2 => ZeroJunction\p;
      ZeroJunction\p => C\input;
      ZeroJunction\p => OneJunction1\p;
      θ_dot_input => OneJunction\p;
     end;
    implementation_end;
   HD6 979 145
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
    type 'Submodel-Graphical'
     ports
      power in θ_dot_input;
      power out θ_dot_output;
    end;
    implementation bg
     submodels
      C 376 48
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\C.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:58:35</TimeStamp>
</Description>
</Information>';
       type C
        ports
         power in input;
         signal out phi;
        restrictions
         causality preferred out input;
       end;
       icon bg ellipse bottom
        figures
         text 'C' 376 48 color 0 18 bold;
       end;
       implementation eq
variables
	real phi1;
	real phi2;
parameters
	real k1 = 47e2;
	real k2 = 61e2;
	real k3 = 70e2;
	real T1 = 2;
	real T2 = 6.9;
equations
	phi = int(input.f);
	phi1 = T1/k1;
	phi2 = T1/k1 + (T2 - T1)/k2;
	
	//input.e is the torque
	
	if phi <= phi1 and phi >= -phi1 then
		input.e = phi * k1;
	elsif phi <= phi2 and phi >= -phi2 then
		input.e = (phi - sign(phi)*phi1) * k2 + sign(phi)*T1;
	else 
		input.e = (phi - sign(phi)*phi2)*k3 + sign(phi)*T2;
	end;
		implementation_end;
      I 184 40
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\I.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:55:55</TimeStamp>
</Description>
</Information>';
       type I
        ports
         power in p;
         signal out state;
        restrictions
         causality preferred in p;
       end;
       icon bg ellipse bottom
        figures
         text 'I' 184 40 color 0 18 bold;
       end;
       implementation eq
parameters
	real i = 0.091e-4;
equations
    state = int(p.e);
    p.f = state / i;
implementation_end;
      plug θ_dot_input 104 120;
      plug θ_dot_output 584 120;
      OneJunction 184 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 184 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 480 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
       knot OneJunction
        ports
         power knot duplicatable none p [1];
         signal knot out flow [1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 480 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R 184 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_input;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 184 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4;
	real B_minus = -0.007;
	real B_plus = 0.008;

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_input.f < 0 then
		B_viscous * θ_dot_input.f + B_minus
	else 
		if θ_dot_input.f > 0 then
			B_viscous * θ_dot_input.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_input.e = B_tilde;
implementation_end;
      R1 480 200
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\R.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:35:37</TimeStamp>
</Description>
</Information>';
       type R
        ports
         power in θ_dot_output;
       end;
       icon bg ellipse bottom
        figures
         text 'R' 480 200 color 0 18 bold;
       end;
       implementation eq
parameters
	real B_viscous = 6.4e-4; 
	real B_minus = -0.007; // da cambiare?????
	real B_plus = 0.008;	// da cambiare?????

variables
	real B_tilde;
equations
	B_tilde = if θ_dot_output.f < 0 then
		B_viscous * θ_dot_output.f + B_minus
	else 
		if θ_dot_output.f > 0 then
			B_viscous * θ_dot_output.f + B_plus
		else
				0
		end
	end;
	
	θ_dot_output.e = B_tilde;
implementation_end;
      TF 280 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\TF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:43:47</TimeStamp>
</Description>
</Information>';
       type TF
        ports
         power in p1;
         power out p2;
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 280 120 color 0 18 bold;
       end;
       implementation eq
parameters
	real r = -100;
equations
	p2.e = r * p1.e;
	p1.f = r * p2.f;

implementation_end;
      ZeroJunction 376 120
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 376 120 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      OneJunction\p => I\p;
      OneJunction\p => R\θ_dot_input;
      OneJunction\p => TF\p1;
      OneJunction1\p => R1\θ_dot_output;
      OneJunction1\p => θ_dot_output;
      TF\p2 => ZeroJunction\p;
      ZeroJunction\p => C\input;
      ZeroJunction\p => OneJunction1\p;
      θ_dot_input => OneJunction\p;
     end;
    implementation_end;
   Joint1 40 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power in ω_A [3,1];
      power out V_B [3,1];
      power out ω_B [3,1];
      power in θ_dot;
      signal out theta_1;
    end;
    icon bg
     figures
      rectangle 16 -8 64 40 color 0 fill 15132390;
      text 'name' 40 16 color 0 16;
     terminals
      V_B 64 32 fixed;
      ω_B 64 0 fixed;
    end;
    implementation bg
     submodels
      FlowSensor1 208 295.9
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
       knot FlowSensor
        ports
         power knot in p1 [1];
         power knot out p2 [1];
         signal knot out flow [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 201.1 288.8 214.9 303.1 color 0 fill 16777215;
         text 'f' 208 295.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
      MTF1 424 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 360 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      MTF2 424 152
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 152 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      plug V_A 48 360;
      plug ω_A 32 152;
      plug V_B 504 360;
      plug ω_B 496 152;
      plug θ_dot 96 296;
      plug theta_1 296 256;
      PowerDemux 94 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 96 56 96 248 color 0 width 2;
   rectangle 88 56 100 241.7 color -1;
   text '2' 113.5 216.5 color 8421504 8;
  terminals
   z 112 232 fixed;
   x 112 72 fixed;
   y 112 152 fixed;
   input 96 152 fixed;
 end;
 implementation eq
equations
	input.e = [x.e; y.e; z.e];
	input.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 color 0 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
specification_end;
						end;
      PowerMux 384 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in z;
   power out output [3,1];
   power in y;
   power in x;
  restrictions
   causality constraint not_equal z output;
 end;
 icon bg bottom
  figures
   line 384 56 384 248 color 0 width 2;
   rectangle 376 60 392 245.6 color -1;
   text '2' 394 218.1 color 8421504 8;
  terminals
   z 368 232 fixed;
   output 392 152 fixed;
   y 368 152 fixed;
   x 368 72 fixed;
 end;
 implementation eq
equations
	output.e = [x.e; y.e; z.e];
	output.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input1 128 64 fixed;
   input2 128 72 fixed;
   input3 128 80 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
						end;
      R_AB 368 296
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in theta;
         signal out R_AB [3,3];
       end;
       implementation eq
equations
	R_AB = [cos(theta), -sin(theta), 0; 
				sin(theta), cos(theta), 0; 
				0, 0, 1];implementation_end;
      R_C 288 424
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x [3,1];
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 248 408 328 440 color 0 fill 15132390;
         text 'name' 288 424 color 0 16;
       end;
       implementation eq
equations
	// start typing here
	x.e = constraint(x.f);
 implementation_end;
      R_C1 208 112
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 96 248 128 color 0 fill 15132390;
         text 'name' 208 112 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      R_C2 208 32
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 16 248 48 color 0 fill 15132390;
         text 'name' 208 32 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      Splitter 424 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 420.8 292.8 427.2 299.2 color -1 fill 0;
         ellipse 419.7 291.7 428.3 300.3 color -1;
        terminals
         input 424 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 296 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 292.8 292.8 299.2 299.2 color -1 fill 0;
         ellipse 291.7 291.7 300.3 300.3 color -1;
        terminals
         input 296 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Theta 248 296
       description '<Information><Description><Version>4.3</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Integrate.emx</LibraryPath><TimeStamp>2013-3-8 14:47:42</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Integrate
        ports
         signal in theta_dot;
         signal out theta;
       end;
       icon bg bottom
        figures
         rectangle 232 280 264 312 color 0 fill 15132390;
         text '∫' 248 296.3 color 16711680 'Lucida Sans' 21 italic;
       end;
       implementation eq
parameters
	real initial = 0;		// initial value
equations
	theta = int(theta_dot, initial);
     implementation_end;
      ZeroJunction 208 72
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 72 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 288 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 288 360 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction2 208 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 152 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction3 208 232
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 232 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      FlowSensor1\flow -> Theta\theta_dot;
      FlowSensor1\p2 => ZeroJunction3\p;
      MTF1\p2 => V_B;
      MTF2\p2 => ω_B;
      PowerDemux\x => ZeroJunction\p;
      PowerDemux\y => ZeroJunction2\p;
      PowerDemux\z => ZeroJunction3\p;
      PowerMux\output => MTF2\p1;
      R_AB\R_AB -> Splitter\input;
      Splitter\output -> MTF1\r;
      Splitter\output -> MTF2\r;
      Splitter2\output -> R_AB\theta;
      Splitter2\output -> theta_1;
      Theta\theta -> Splitter2\input;
      V_A => ZeroJunction1\p;
      ZeroJunction\p => PowerMux\x;
      ZeroJunction\p => R_C2\x;
      ZeroJunction1\p => MTF1\p1;
      ZeroJunction1\p => R_C\x;
      ZeroJunction2\p => PowerMux\y;
      ZeroJunction2\p => R_C1\x;
      ZeroJunction3\p => PowerMux\z;
      θ_dot => FlowSensor1\p1;
      ω_A => PowerDemux\input;
     end;
     figures
      text 'z' 112 344 color 0 16;
      text 'x' 112 56 color 0 16;
      text 'y' 112 128 color 0 16;
    implementation_end;
   Joint2 224 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power in ω_A [3,1];
      power out V_B [3,1];
      power out ω_B [3,1];
      power in θ_dot;
      signal out theta_2;
    end;
    icon bg
     figures
      rectangle 200 -8 248 40 color 0 fill 15132390;
      text 'name' 224 16 color 0 16;
     terminals
      V_A 198 32 fixed;
      ω_A 198 0 fixed;
      V_B 250 32 fixed;
      ω_B 250 0 fixed;
      theta_2 224 0 fixed;
    end;
    implementation bg
     submodels
      FlowSensor1 208 295.9
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
       knot FlowSensor
        ports
         power knot in p1 [1];
         power knot out p2 [1];
         signal knot out flow [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 201.1 288.8 214.9 303.1 color 0 fill 16777215;
         text 'f' 208 295.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
      MTF1 424 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 360 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      MTF2 424 152
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 152 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      plug V_A 48 360;
      plug ω_A 32 152;
      plug V_B 504 360;
      plug ω_B 496 152;
      plug θ_dot 96 296;
      plug theta_2 296 256;
      PowerDemux 94 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 96 56 96 248 color 0 width 2;
   rectangle 88 56 100 241.7 color -1;
   text '2' 113.5 216.5 color 8421504 8;
  terminals
   z 112 232 fixed;
   x 112 72 fixed;
   y 112 152 fixed;
   input 96 152 fixed;
 end;
 implementation eq
equations
	input.e = [x.e; y.e; z.e];
	input.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 color 0 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
specification_end;
						end;
      PowerMux 384 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in z;
   power out output [3,1];
   power in y;
   power in x;
  restrictions
   causality constraint not_equal z output;
 end;
 icon bg bottom
  figures
   line 384 56 384 248 color 0 width 2;
   rectangle 376 60 392 245.6 color -1;
   text '2' 394 218.1 color 8421504 8;
  terminals
   z 368 232 fixed;
   output 392 152 fixed;
   y 368 152 fixed;
   x 368 72 fixed;
 end;
 implementation eq
equations
	output.e = [x.e; y.e; z.e];
	output.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input1 128 64 fixed;
   input2 128 72 fixed;
   input3 128 80 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
						end;
      R_AB 368 296
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in theta;
         signal out R_AB [3,3];
       end;
       implementation eq
equations
	R_AB = [cos(theta), -sin(theta), 0; 
				sin(theta), cos(theta), 0; 
				0, 0, 1];implementation_end;
      R_C 288 408
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x [3,1];
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 248 392 328 424 color 0 fill 15132390;
         text 'name' 288 408 color 0 16;
       end;
       implementation eq
equations
	// start typing here
	x.e = constraint(x.f);
 implementation_end;
      R_C1 208 32
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 16 248 48 color 0 fill 15132390;
         text 'name' 208 32 color 0 16;
       end;
       implementation eq
equations
	// start typing here
	x.e = constraint(x.f);
 implementation_end;
      R_C2 208 112
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 96 248 128 color 0 fill 15132390;
         text 'name' 208 112 color 0 16;
       end;
       implementation eq
equations
	// start typing here
	x.e = constraint(x.f);
 implementation_end;
      Splitter 424 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 420.8 292.8 427.2 299.2 color -1 fill 0;
         ellipse 419.7 291.7 428.3 300.3 color -1;
        terminals
         input 424 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 296 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 292.8 292.8 299.2 299.2 color -1 fill 0;
         ellipse 291.7 291.7 300.3 300.3 color -1;
        terminals
         input 296 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Theta 248 296
       description '<Information><Description><Version>4.3</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Integrate.emx</LibraryPath><TimeStamp>2013-3-8 14:47:42</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Integrate
        ports
         signal in theta_dot;
         signal out theta;
       end;
       icon bg bottom
        figures
         rectangle 232 280 264 312 color 0 fill 15132390;
         text '∫' 248 296.3 color 16711680 'Lucida Sans' 21 italic;
       end;
       implementation eq
parameters
	real initial = 0;		// initial value
equations
	theta = int(theta_dot, initial);
     implementation_end;
      ZeroJunction 208 72
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 72 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 288 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 288 360 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction2 208 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 152 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction3 208 232
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 232 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      FlowSensor1\flow -> Theta\theta_dot;
      FlowSensor1\p2 => ZeroJunction3\p;
      MTF1\p2 => V_B;
      MTF2\p2 => ω_B;
      PowerDemux\x => ZeroJunction\p;
      PowerDemux\y => ZeroJunction2\p;
      PowerDemux\z => ZeroJunction3\p;
      PowerMux\output => MTF2\p1;
      R_AB\R_AB -> Splitter\input;
      Splitter\output -> MTF1\r;
      Splitter\output -> MTF2\r;
      Splitter2\output -> R_AB\theta;
      Splitter2\output -> theta_2;
      Theta\theta -> Splitter2\input;
      V_A => ZeroJunction1\p;
      ZeroJunction\p => PowerMux\x;
      ZeroJunction\p => R_C1\x;
      ZeroJunction1\p => MTF1\p1;
      ZeroJunction1\p => R_C\x;
      ZeroJunction2\p => PowerMux\y;
      ZeroJunction2\p => R_C2\x;
      ZeroJunction3\p => PowerMux\z;
      θ_dot => FlowSensor1\p1;
      ω_A => PowerDemux\input;
     end;
     figures
      text 'z' 112 208 color 0 16;
      text 'x' 112 56 color 0 16;
      text 'y' 112 128 color 0 16;
    implementation_end;
   Joint3 400 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power in ω_A [3,1];
      power out V_B [3,1];
      power out ω_B [3,1];
      power in θ_dot;
      signal out theta_3;
    end;
    icon bg
     figures
      rectangle 376 -8 424 40 color 0 fill 15132390;
      text 'name' 400 16 color 0 16;
     terminals
      V_B 424 32 fixed;
      ω_B 424 0 fixed;
    end;
    implementation bg
     submodels
      FlowSensor1 208 295.9
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
       knot FlowSensor
        ports
         power knot in p1 [1];
         power knot out p2 [1];
         signal knot out flow [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 201.1 288.8 214.9 303.1 color 0 fill 16777215;
         text 'f' 208 295.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
      MTF1 424 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 360 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      MTF2 424 152
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 152 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      plug V_A 48 360;
      plug ω_A 32 152;
      plug V_B 504 360;
      plug ω_B 496 152;
      plug θ_dot 96 296;
      plug theta_3 296 256;
      PowerDemux 94 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 96 56 96 248 color 0 width 2;
   rectangle 88 56 100 241.7 color -1;
   text '2' 113.5 216.5 color 8421504 8;
  terminals
   z 112 232 fixed;
   x 112 72 fixed;
   y 112 152 fixed;
   input 96 152 fixed;
 end;
 implementation eq
equations
	input.e = [x.e; y.e; z.e];
	input.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 color 0 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
specification_end;
						end;
      PowerMux 384 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in z;
   power out output [3,1];
   power in y;
   power in x;
  restrictions
   causality constraint not_equal z output;
 end;
 icon bg bottom
  figures
   line 384 56 384 248 color 0 width 2;
   rectangle 376 60 392 245.6 color -1;
   text '2' 394 218.1 color 8421504 8;
  terminals
   z 368 232 fixed;
   output 392 152 fixed;
   y 368 152 fixed;
   x 368 72 fixed;
 end;
 implementation eq
equations
	output.e = [x.e; y.e; z.e];
	output.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input1 128 64 fixed;
   input2 128 72 fixed;
   input3 128 80 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
						end;
      R_AB 368 296
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in theta;
         signal out R_AB [3,3];
       end;
       implementation eq
equations
	R_AB = [cos(theta), -sin(theta), 0; 
				sin(theta), cos(theta), 0; 
				0, 0, 1];implementation_end;
      R_C 288 424
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x [3,1];
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 248 408 328 440 color 0 fill 15132390;
         text 'name' 288 424 color 0 16;
       end;
       implementation eq
equations
	// start typing here
	x.e = constraint(x.f);
 implementation_end;
      R_C1 208 112
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 96 248 128 color 0 fill 15132390;
         text 'name' 208 112 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      R_C2 208 32
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 16 248 48 color 0 fill 15132390;
         text 'name' 208 32 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      Splitter 424 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 420.8 292.8 427.2 299.2 color -1 fill 0;
         ellipse 419.7 291.7 428.3 300.3 color -1;
        terminals
         input 424 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 296 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 292.8 292.8 299.2 299.2 color -1 fill 0;
         ellipse 291.7 291.7 300.3 300.3 color -1;
        terminals
         input 296 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Theta 248 296
       description '<Information><Description><Version>4.3</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Integrate.emx</LibraryPath><TimeStamp>2013-3-8 14:47:42</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Integrate
        ports
         signal in theta_dot;
         signal out theta;
       end;
       icon bg bottom
        figures
         rectangle 232 280 264 312 color 0 fill 15132390;
         text '∫' 248 296.3 color 16711680 'Lucida Sans' 21 italic;
       end;
       implementation eq
parameters
	real initial = 0;		// initial value
equations
	theta = int(theta_dot, initial);
     implementation_end;
      ZeroJunction 208 72
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 72 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 288 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 288 360 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction2 208 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 152 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction3 208 232
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 232 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      FlowSensor1\flow -> Theta\theta_dot;
      FlowSensor1\p2 => ZeroJunction3\p;
      MTF1\p2 => V_B;
      MTF2\p2 => ω_B;
      PowerDemux\x => ZeroJunction\p;
      PowerDemux\y => ZeroJunction2\p;
      PowerDemux\z => ZeroJunction3\p;
      PowerMux\output => MTF2\p1;
      R_AB\R_AB -> Splitter\input;
      Splitter\output -> MTF1\r;
      Splitter\output -> MTF2\r;
      Splitter2\output -> R_AB\theta;
      Splitter2\output -> theta_3;
      Theta\theta -> Splitter2\input;
      V_A => ZeroJunction1\p;
      ZeroJunction\p => PowerMux\x;
      ZeroJunction\p => R_C2\x;
      ZeroJunction1\p => MTF1\p1;
      ZeroJunction1\p => R_C\x;
      ZeroJunction2\p => PowerMux\y;
      ZeroJunction2\p => R_C1\x;
      ZeroJunction3\p => PowerMux\z;
      θ_dot => FlowSensor1\p1;
      ω_A => PowerDemux\input;
     end;
     figures
      text 'z' 112 344 color 0 16;
      text 'x' 112 56 color 0 16;
      text 'y' 112 128 color 0 16;
    implementation_end;
   Joint4 592 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power in ω_A [3,1];
      power out V_B [3,1];
      power out ω_B [3,1];
      power in θ_dot;
      signal out theta_4;
    end;
    icon bg
     figures
      rectangle 568 -8 616 40 color 0 fill 15132390;
      text 'name' 592 16 color 0 16;
     terminals
      V_B 616 32 fixed;
      ω_B 616 0 fixed;
    end;
    implementation bg
     submodels
      FlowSensor1 208 295.9
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
       knot FlowSensor
        ports
         power knot in p1 [1];
         power knot out p2 [1];
         signal knot out flow [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 201.1 288.8 214.9 303.1 color 0 fill 16777215;
         text 'f' 208 295.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
      MTF1 424 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 360 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      MTF2 424 152
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 152 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      plug V_A 48 360;
      plug ω_A 32 152;
      plug V_B 504 360;
      plug ω_B 496 152;
      plug θ_dot 96 296;
      plug theta_4 296 256;
      PowerDemux 94 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 96 56 96 248 color 0 width 2;
   rectangle 88 56 100 241.7 color -1;
   text '2' 113.5 216.5 color 8421504 8;
  terminals
   z 112 232 fixed;
   x 112 72 fixed;
   y 112 152 fixed;
   input 96 152 fixed;
 end;
 implementation eq
equations
	input.e = [x.e; y.e; z.e];
	input.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 color 0 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
specification_end;
						end;
      PowerMux 384 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in z;
   power out output [3,1];
   power in y;
   power in x;
  restrictions
   causality constraint not_equal z output;
 end;
 icon bg bottom
  figures
   line 384 56 384 248 color 0 width 2;
   rectangle 376 60 392 245.6 color -1;
   text '2' 394 218.1 color 8421504 8;
  terminals
   z 368 232 fixed;
   output 392 152 fixed;
   y 368 152 fixed;
   x 368 72 fixed;
 end;
 implementation eq
equations
	output.e = [x.e; y.e; z.e];
	output.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input1 128 64 fixed;
   input2 128 72 fixed;
   input3 128 80 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
						end;
      R_AB 368 296
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in theta;
         signal out R_AB [3,3];
       end;
       implementation eq
equations
	R_AB = [cos(theta), -sin(theta), 0; 
				sin(theta), cos(theta), 0; 
				0, 0, 1];implementation_end;
      R_C 288 424
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x [3,1];
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 248 408 328 440 color 0 fill 15132390;
         text 'name' 288 424 color 0 16;
       end;
       implementation eq
equations
	// start typing here
	x.e = constraint(x.f);
 implementation_end;
      R_C1 208 112
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 96 248 128 color 0 fill 15132390;
         text 'name' 208 112 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      R_C2 208 32
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 16 248 48 color 0 fill 15132390;
         text 'name' 208 32 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      Splitter 424 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 420.8 292.8 427.2 299.2 color -1 fill 0;
         ellipse 419.7 291.7 428.3 300.3 color -1;
        terminals
         input 424 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 296 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 292.8 292.8 299.2 299.2 color -1 fill 0;
         ellipse 291.7 291.7 300.3 300.3 color -1;
        terminals
         input 296 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Theta 248 296
       description '<Information><Description><Version>4.3</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Integrate.emx</LibraryPath><TimeStamp>2013-3-8 14:47:42</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Integrate
        ports
         signal in theta_dot;
         signal out theta;
       end;
       icon bg bottom
        figures
         rectangle 232 280 264 312 color 0 fill 15132390;
         text '∫' 248 296.3 color 16711680 'Lucida Sans' 21 italic;
       end;
       implementation eq
parameters
	real initial = 0;		// initial value
equations
	theta = int(theta_dot, initial);
     implementation_end;
      ZeroJunction 208 72
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 72 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 288 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 288 360 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction2 208 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 152 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction3 208 232
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 232 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      FlowSensor1\flow -> Theta\theta_dot;
      FlowSensor1\p2 => ZeroJunction3\p;
      MTF1\p2 => V_B;
      MTF2\p2 => ω_B;
      PowerDemux\x => ZeroJunction\p;
      PowerDemux\y => ZeroJunction2\p;
      PowerDemux\z => ZeroJunction3\p;
      PowerMux\output => MTF2\p1;
      R_AB\R_AB -> Splitter\input;
      Splitter\output -> MTF1\r;
      Splitter\output -> MTF2\r;
      Splitter2\output -> R_AB\theta;
      Splitter2\output -> theta_4;
      Theta\theta -> Splitter2\input;
      V_A => ZeroJunction1\p;
      ZeroJunction\p => PowerMux\x;
      ZeroJunction\p => R_C2\x;
      ZeroJunction1\p => MTF1\p1;
      ZeroJunction1\p => R_C\x;
      ZeroJunction2\p => PowerMux\y;
      ZeroJunction2\p => R_C1\x;
      ZeroJunction3\p => PowerMux\z;
      θ_dot => FlowSensor1\p1;
      ω_A => PowerDemux\input;
     end;
     figures
      text 'z' 112 344 color 0 16;
      text 'x' 112 56 color 0 16;
      text 'y' 112 128 color 0 16;
    implementation_end;
   Joint5 792 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power in ω_A [3,1];
      power out V_B [3,1];
      power out ω_B [3,1];
      power in θ_dot;
      signal out theta_5;
    end;
    icon bg
     figures
      rectangle 768 -8 816 40 color 0 fill 15132390;
      text 'name' 792 16 color 0 16;
     terminals
      V_B 816 32 fixed;
      ω_B 816 0 fixed;
    end;
    implementation bg
     submodels
      FlowSensor1 208 295.9
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
       knot FlowSensor
        ports
         power knot in p1 [1];
         power knot out p2 [1];
         signal knot out flow [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 201.1 288.8 214.9 303.1 color 0 fill 16777215;
         text 'f' 208 295.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
      MTF1 424 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 360 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      MTF2 424 152
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 152 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      plug V_A 48 360;
      plug ω_A 32 152;
      plug V_B 504 360;
      plug ω_B 496 152;
      plug θ_dot 96 296;
      plug theta_5 296 256;
      PowerDemux 94 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 96 56 96 248 color 0 width 2;
   rectangle 88 56 100 241.7 color -1;
   text '2' 113.5 216.5 color 8421504 8;
  terminals
   z 112 232 fixed;
   x 112 72 fixed;
   y 112 152 fixed;
   input 96 152 fixed;
 end;
 implementation eq
equations
	input.e = [x.e; y.e; z.e];
	input.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 color 0 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
specification_end;
						end;
      PowerMux 384 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in z;
   power out output [3,1];
   power in y;
   power in x;
  restrictions
   causality constraint not_equal z output;
 end;
 icon bg bottom
  figures
   line 384 56 384 248 color 0 width 2;
   rectangle 376 60 392 245.6 color -1;
   text '2' 394 218.1 color 8421504 8;
  terminals
   z 368 232 fixed;
   output 392 152 fixed;
   y 368 152 fixed;
   x 368 72 fixed;
 end;
 implementation eq
equations
	output.e = [x.e; y.e; z.e];
	output.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input1 128 64 fixed;
   input2 128 72 fixed;
   input3 128 80 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
						end;
      R_AB 368 296
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in theta;
         signal out R_AB [3,3];
       end;
       implementation eq
equations
	R_AB = [cos(theta), -sin(theta), 0; 
				sin(theta), cos(theta), 0; 
				0, 0, 1];implementation_end;
      R_C 288 424
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x [3,1];
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 248 408 328 440 color 0 fill 15132390;
         text 'name' 288 424 color 0 16;
       end;
       implementation eq
equations
	// start typing here
	x.e = constraint(x.f);
 implementation_end;
      R_C1 208 112
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 96 248 128 color 0 fill 15132390;
         text 'name' 208 112 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      R_C2 208 32
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 16 248 48 color 0 fill 15132390;
         text 'name' 208 32 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      Splitter 424 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 420.8 292.8 427.2 299.2 color -1 fill 0;
         ellipse 419.7 291.7 428.3 300.3 color -1;
        terminals
         input 424 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 296 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 292.8 292.8 299.2 299.2 color -1 fill 0;
         ellipse 291.7 291.7 300.3 300.3 color -1;
        terminals
         input 296 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Theta 248 296
       description '<Information><Description><Version>4.3</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Integrate.emx</LibraryPath><TimeStamp>2013-3-8 14:47:42</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Integrate
        ports
         signal in theta_dot;
         signal out theta;
       end;
       icon bg bottom
        figures
         rectangle 232 280 264 312 color 0 fill 15132390;
         text '∫' 248 296.3 color 16711680 'Lucida Sans' 21 italic;
       end;
       implementation eq
parameters
	real initial = 0;		// initial value
equations
	theta = int(theta_dot, initial);
     implementation_end;
      ZeroJunction 208 72
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 72 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 288 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 288 360 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction2 208 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 152 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction3 208 232
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 232 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      FlowSensor1\flow -> Theta\theta_dot;
      FlowSensor1\p2 => ZeroJunction3\p;
      MTF1\p2 => V_B;
      MTF2\p2 => ω_B;
      PowerDemux\x => ZeroJunction\p;
      PowerDemux\y => ZeroJunction2\p;
      PowerDemux\z => ZeroJunction3\p;
      PowerMux\output => MTF2\p1;
      R_AB\R_AB -> Splitter\input;
      Splitter\output -> MTF1\r;
      Splitter\output -> MTF2\r;
      Splitter2\output -> R_AB\theta;
      Splitter2\output -> theta_5;
      Theta\theta -> Splitter2\input;
      V_A => ZeroJunction1\p;
      ZeroJunction\p => PowerMux\x;
      ZeroJunction\p => R_C2\x;
      ZeroJunction1\p => MTF1\p1;
      ZeroJunction1\p => R_C\x;
      ZeroJunction2\p => PowerMux\y;
      ZeroJunction2\p => R_C1\x;
      ZeroJunction3\p => PowerMux\z;
      θ_dot => FlowSensor1\p1;
      ω_A => PowerDemux\input;
     end;
     figures
      text 'z' 112 344 color 0 16;
      text 'x' 112 56 color 0 16;
      text 'y' 112 128 color 0 16;
    implementation_end;
   Joint6 984 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power in ω_A [3,1];
      power out V_B [3,1];
      power out ω_B [3,1];
      power in θ_dot;
      signal out theta_6;
    end;
    icon bg
     figures
      rectangle 960 -8 1008 40 color 0 fill 15132390;
      text 'name' 984 16 color 0 16;
     terminals
      V_B 1008 32 fixed;
      ω_B 1008 0 fixed;
    end;
    implementation bg
     submodels
      FlowSensor1 208 295.9
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\FlowSensor.emx</LibraryPath>
  <TimeStamp>2011-11-29 15:50:53</TimeStamp>
</Description>
</Information>';
       knot FlowSensor
        ports
         power knot in p1 [1];
         power knot out p2 [1];
         signal knot out flow [1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         ellipse 201.1 288.8 214.9 303.1 color 0 fill 16777215;
         text 'f' 208 295.2 color 0;
       end;
       implementation eq
equations
	p2.f = p1.f;
	p1.e = p2.e;
	flow = p1.f;
implementation_end;
      MTF1 424 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 360 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      MTF2 424 152
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:21</TimeStamp>
</Description>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse
        figures
         text 'MTF' 424 152 color 0 18 bold;
       end;
       implementation eq
equations					
//	p1.e = transpose(r) * p2.e;
//	p2.f = r * p1.f;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      plug V_A 48 360;
      plug ω_A 32 152;
      plug V_B 504 360;
      plug ω_B 496 152;
      plug θ_dot 96 296;
      plug theta_6 296 256;
      PowerDemux 94 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 96 56 96 248 color 0 width 2;
   rectangle 88 56 100 241.7 color -1;
   text '2' 113.5 216.5 color 8421504 8;
  terminals
   z 112 232 fixed;
   x 112 72 fixed;
   y 112 152 fixed;
   input 96 152 fixed;
 end;
 implementation eq
equations
	input.e = [x.e; y.e; z.e];
	input.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 color 0 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = output.e;
	input.f = output.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e];
	input.f = [output1.f; output2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 color 0 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e];
	input.f = [output1.f; output2.f; output3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e];
	input.f = [output1.f; output2.f; output3.f; output4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 color 0 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 color 0 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e];
	input.f = [output1.f; output2.f; output3.f; output4.f; output5.f; output6.f; output7.f; output8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerDemux
  ports
   power out z;
   power out x;
   power out y;
   power in input [3,1];
  restrictions
   causality constraint not_equal x input;
   causality constraint not_equal y input;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 color 0 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input 128 72 fixed;
 end;
 implementation eq
equations
	input.e = [output1.e; output2.e; output3.e; output4.e; output5.e; output6.e; output7.e; output8.e; output9.e];implementation_end;
specification_end;
						end;
      PowerMux 384 152
						specifications active 'default'
							specification 'default'
 description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerDemux.emx</LibraryPath>
  <TimeStamp>2011-10-5 22:44:58</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in z;
   power out output [3,1];
   power in y;
   power in x;
  restrictions
   causality constraint not_equal z output;
 end;
 icon bg bottom
  figures
   line 384 56 384 248 color 0 width 2;
   rectangle 376 60 392 245.6 color -1;
   text '2' 394 218.1 color 8421504 8;
  terminals
   z 368 232 fixed;
   output 392 152 fixed;
   y 368 152 fixed;
   x 368 72 fixed;
 end;
 implementation eq
equations
	output.e = [x.e; y.e; z.e];
	output.f = [x.f; y.f; z.f];implementation_end;
specification_end;
							specification 'inputs_1'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input;
   power out output;
  restrictions
   causality constraint not_equal input output;
 end;
 icon bg bottom
  figures
   line 128 64 128 80 width 2;
   rectangle 124 64 132 80 color -1;
   text '1' 133 82 color 8421504 8;
  terminals
   input 128 72 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = input.e;
	output.f = input.f;implementation_end;
specification_end;
							specification 'inputs_2'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power out output [2,1];
   power in input2;
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '2' 133 83 color 8421504 8;
  terminals
   input1 128 64 fixed;
   output 128 72 fixed;
   input2 128 80 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e];
	output.f = [input1.f; input2.f];implementation_end;
specification_end;
							specification 'inputs_3'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power out output [3,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
 end;
 icon bg bottom
  figures
   line 128 56 128 88 width 2;
   rectangle 124 56 132 88 color -1;
   text '3' 133 82 color 8421504 8;
  terminals
   input1 128 64 fixed;
   input2 128 72 fixed;
   input3 128 80 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e];
	output.f = [input1.f; input2.f; input3.f];implementation_end;
specification_end;
							specification 'inputs_4'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power out output [4,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '4' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 80 fixed;
   input4 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e];
	output.f = [input1.f; input2.f; input3.f; input4.f];implementation_end;
specification_end;
							specification 'inputs_5'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power out output [5,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
 end;
 icon bg bottom
  figures
   line 128 48 128 96 width 2;
   rectangle 124 48 132 96 color -1;
   text '5' 133 83 color 8421504 8;
  terminals
   input1 128 56 fixed;
   input2 128 64 fixed;
   input3 128 72 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f];implementation_end;
specification_end;
							specification 'inputs_6'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power out output [6,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '6' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 80 fixed;
   input5 128 88 fixed;
   input6 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f];implementation_end;
specification_end;
							specification 'inputs_7'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power out output [7,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
 end;
 icon bg bottom
  figures
   line 128 40 128 104 width 2;
   rectangle 124 40 132 104 color -1;
   text '7' 133 83 color 8421504 8;
  terminals
   input1 128 48 fixed;
   input2 128 56 fixed;
   input3 128 64 fixed;
   input4 128 72 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f];implementation_end;
specification_end;
							specification 'inputs_8'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power out output [8,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   rectangle 124 32 132 112 color -1;
   text '8' 133 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 80 fixed;
   input6 128 88 fixed;
   input7 128 96 fixed;
   input8 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e];
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f];implementation_end;
specification_end;
							specification 'inputs_9'
description '<Description>
   <Version>4.1</Version>
  <LibraryPath>Bond Graph\PowerMux.emx</LibraryPath>
  <TimeStamp>2011-3-4 15:12:50</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type PowerMux
  ports
   power in input1;
   power in input2;
   power in input3;
   power in input4;
   power in input5;
   power in input6;
   power in input7;
   power in input8;
   power in input9;
   power out output [9,1];
  restrictions
   causality constraint not_equal input1 output;
   causality constraint not_equal input2 output;
   causality constraint not_equal input3 output;
   causality constraint not_equal input4 output;
   causality constraint not_equal input5 output;
   causality constraint not_equal input6 output;
   causality constraint not_equal input7 output;
   causality constraint not_equal input8 output;
   causality constraint not_equal input9 output;
 end;
 icon bg bottom
  figures
   line 128 32 128 112 width 2;
   text '9' 132 83 color 8421504 8;
  terminals
   input1 128 40 fixed;
   input2 128 48 fixed;
   input3 128 56 fixed;
   input4 128 64 fixed;
   input5 128 72 fixed;
   input6 128 80 fixed;
   input7 128 88 fixed;
   input8 128 96 fixed;
   input9 128 104 fixed;
   output 128 72 fixed;
 end;
 implementation eq
equations
	output.e = [input1.e; input2.e; input3.e; input4.e; input5.e; input6.e; input7.e; input8.e; input9.e];implementation_end;
	output.f = [input1.f; input2.f; input3.f; input4.f; input5.f; input6.f; input7.f; input8.f; input9.f];specification_end;
						end;
      R_AB 368 296
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in theta;
         signal out R_AB [3,3];
       end;
       implementation eq
equations
	R_AB = [cos(theta), -sin(theta), 0; 
				sin(theta), cos(theta), 0; 
				0, 0, 1];implementation_end;
      R_C 288 424
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x [3,1];
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 248 408 328 440 color 0 fill 15132390;
         text 'name' 288 424 color 0 16;
       end;
       implementation eq
equations
	// start typing here
	x.e = constraint(x.f);
 implementation_end;
      R_C1 208 112
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 96 248 128 color 0 fill 15132390;
         text 'name' 208 112 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      R_C2 208 32
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         power in x;
        restrictions
         causality preferred out x;
       end;
       icon bg
        figures
         rectangle 168 16 248 48 color 0 fill 15132390;
         text 'name' 208 32 color 0 16;
       end;
       implementation eq
equations
	// start typing here
x.e = constraint(x.f);
 implementation_end;
      Splitter 424 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 420.8 292.8 427.2 299.2 color -1 fill 0;
         ellipse 419.7 291.7 428.3 300.3 color -1;
        terminals
         input 424 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 296 296
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 292.8 292.8 299.2 299.2 color -1 fill 0;
         ellipse 291.7 291.7 300.3 300.3 color -1;
        terminals
         input 296 296 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Theta 248 296
       description '<Information><Description><Version>4.3</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Integrate.emx</LibraryPath><TimeStamp>2013-3-8 14:47:42</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Integrate
        ports
         signal in theta_dot;
         signal out theta;
       end;
       icon bg bottom
        figures
         rectangle 232 280 264 312 color 0 fill 15132390;
         text '∫' 248 296.3 color 16711680 'Lucida Sans' 21 italic;
       end;
       implementation eq
parameters
	real initial = 0;		// initial value
equations
	theta = int(theta_dot, initial);
     implementation_end;
      ZeroJunction 208 72
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 72 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 288 360
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 288 360 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction2 208 152
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 152 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction3 208 232
       description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [1];
         signal knot out effort [1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 208 232 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      FlowSensor1\flow -> Theta\theta_dot;
      FlowSensor1\p2 => ZeroJunction3\p;
      MTF1\p2 => V_B;
      MTF2\p2 => ω_B;
      PowerDemux\x => ZeroJunction\p;
      PowerDemux\y => ZeroJunction2\p;
      PowerDemux\z => ZeroJunction3\p;
      PowerMux\output => MTF2\p1;
      R_AB\R_AB -> Splitter\input;
      Splitter\output -> MTF1\r;
      Splitter\output -> MTF2\r;
      Splitter2\output -> R_AB\theta;
      Splitter2\output -> theta_6;
      Theta\theta -> Splitter2\input;
      V_A => ZeroJunction1\p;
      ZeroJunction\p => PowerMux\x;
      ZeroJunction\p => R_C2\x;
      ZeroJunction1\p => MTF1\p1;
      ZeroJunction1\p => R_C\x;
      ZeroJunction2\p => PowerMux\y;
      ZeroJunction2\p => R_C1\x;
      ZeroJunction3\p => PowerMux\z;
      θ_dot => FlowSensor1\p1;
      ω_A => PowerDemux\input;
     end;
     figures
      text 'z' 112 344 color 0 16;
      text 'x' 112 56 color 0 16;
      text 'y' 112 128 color 0 16;
    implementation_end;
   Link1 134 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description><Attributes><GlobalRelations>// link 1 variables
parameters
	real global r_G1[3,1];
	real global DH[6,4];
	real global H_01[4,4];
	real global cos_alpha1;
	real global sin_alpha1;
	real global cos_theta1;
	real global sin_theta1;
variables
	real T_a1[4,4];
	real T_d2[4,4];
	real r_GA1[3,1];
	real r_GB1[3,1];
	real T_rG1[4,4];
	real inverse_T_rG1[4,4];
	real R_alpha1[4,4];
	real H_0_G1_init[4,4];
	real H_A_G_1[4,4];
	real H_G_A_1[4,4];
	real H_G_B_1[4,4];

equations
// transformation from frame A to frame G
	
	T_a1 = [1, 0, 0, DH[1,3];
			  0, 1, 0, 0;
			  0, 0, 1, 0;
			  0, 0, 0, 1];
	
	R_alpha1 = [1, 0, 0, 0;
					0, cos_alpha1, -sin_alpha1, 0;
					0, sin_alpha1, cos_alpha1, 0;
					0, 0, 0, 1];

	T_rG1 = [1, 0, 0, r_G1[1,1];
				0, 1, 0, r_G1[2,1];
				0, 0, 1, r_G1[3,1];
				0, 0, 0, 1];
	
	H_0_G1_init = H_01 * T_rG1;			

	H_A_G_1 = T_a1 * R_alpha1 * T_rG1;
	H_G_A_1 = inverse(H_A_G_1);
	r_GA1[1,1] = H_G_A_1[1,4];
	r_GA1[2,1] = H_G_A_1[2,4];
	r_GA1[3,1] = H_G_A_1[3,4];
	

	// transformation from frame G to frame B

	T_d2 = [1, 0, 0, 0;
			  0, 1, 0, 0;
			  0, 0, 1, DH[2,2];
			  0, 0, 0, 1];
	inverse_T_rG1 = inverse(T_rG1);
	H_G_B_1 = inverse_T_rG1 * T_d2;
	r_GB1[1,1] = H_G_B_1[1,4];
	r_GB1[2,1] = H_G_B_1[2,4];
  r_GB1[3,1] = H_G_B_1[3,4];</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power out V_B [3,1];
      power in ω_A [3,1];
      power out ω_B [3,1];
      signal out pc1 [3,1];
    end;
    icon bg
     figures
      rectangle 108 -8 160 40 color 0 fill 15132390;
      text 'name' 134 16 color 0 16;
     terminals
      V_B 162 32 fixed;
      ω_B 162 0 fixed;
    end;
    implementation bg
     submodels
      EULER_EQUATIONS 456 140
       description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Submodel
        ports
         power in rotation [3,1];
         power in translation [3,1];
         signal out P_OG [3,1];
         signal out R_OG [3,3];
       end;
       implementation eq
parameters
	real global m1;
	real global J1[3,3];
	
variables
	real p[3,1], h[3,1];
	real V_G[3,1], ω_B[3,1];
	real F[3,1], tau[3,1];
	real global H_0_G1_init[4,4];
	real R_OG_0[3,3];
	real P_OG_0[3,1];
	
equations
//	R_OG_0 = [0 , 0, 0;		0, 0, 0; 	0, 0, 0];
// Inizialization of rotation and translation part of H_O_G1
	R_OG_0 = H_0_G1_init[1:3, 1:3];
	P_OG_0 = H_0_G1_init[1:3, 4];
 	//P_OG_0 = [0;0;0];
	
// Assign inatial value for V_G and ω_B, from power inputs
	V_G = translation.f;
	ω_B = rotation.f;

	F = translation.e;
	tau = rotation.e;

// Compute trans. momenta and rot. moment
	p = int(F - skew(ω_B)*p);
	h = int(tau - skew(ω_B)*h);
	
	R_OG = int(R_OG * skew(ω_B), R_OG_0); // Computation of rot matrix between 0 frame and body frame(G frame)
	P_OG = int(R_OG * V_G, P_OG_0); // Computation of position of center of gravity respect frame 0

// Recalculation of the new V_G and ω_B
	translation.f = p/m1;
	rotation.f = inverse(J1)*h;
	implementation_end;
      Gravity_applied 688 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\Se-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:25</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'Se-3'
        ports
         power out p [3,1];
        restrictions
         causality fixed out p;
       end;
       icon bg ellipse bottom
        figures
         text 'Se' 688 216 color 0 18 bold;
       end;
       implementation eq
parameters
	real global m1;
	real global g;
	real effort[3,1] = [0; 0; -m1*g];
variables
	real flow [3,1];
equations
	p.e = effort; 
	flow = p.f;
implementation_end;
      minus_skew_r_GB 192 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GB</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 192 344 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GB1[3,1];
	
equations		
	p1.e = transpose(-skew(r_GB1)) * p2.e;
	p2.f = -skew(r_GB1) * p1.f;

implementation_end;
      plug V_A 272 296;
      plug V_B 456 408;
      plug ω_A 48 136;
      plug ω_B 192 56;
      plug pc1 512 56;
      OneJunction 192 136
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 136 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 456 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 456 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction3 192 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R_alpha 120 136
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B = ω_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 120 136 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha1[4,4];		
	real out_Ralpha1[3,3];
equations					
	out_Ralpha1 = R_alpha1[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha1 * p2.e;
	p2.f = transpose(out_Ralpha1) * p1.f;
implementation_end;
      R_alpha1 336 296
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_B = V_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 336 296 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha1[4,4];		
	real out_Ralpha1[3,3];
equations					
	out_Ralpha1 = R_alpha1[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha1 * p2.e;
	p2.f = transpose(out_Ralpha1) * p1.f;
implementation_end;
      R_OG 600 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:21</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'MTF' 600 216 color 0 18 bold;
       end;
       implementation eq
equations					
	//p1.f = r * p2.f;
	//p2.e = transpose(r) * p1.e;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      skew_r_GA 256 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GA</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 256 216 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GA1[3,1];
	
equations		
	p1.e = transpose(skew(r_GA1)) * p2.e;
	p2.f = skew(r_GA1) * p1.f;

implementation_end;
      Splitter1 600 136
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 596.8 132.8 603.2 139.2 color -1 fill 0;
         ellipse 595.7 131.7 604.3 140.3 color -1;
        terminals
         input 600 136 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      v_B 456 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>v_B = v_G + skew(r_GB) x w</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse right
        figures
         text '0' 456 344 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 336 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_G = V_A - ω_B X r_GA</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 336 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      EULER_EQUATIONS\P_OG -> pc1;
      EULER_EQUATIONS\R_OG -> Splitter1\input;
      Gravity_applied\p => R_OG\p1;
      minus_skew_r_GB\p2 => v_B\p;
      OneJunction\p => EULER_EQUATIONS\rotation;
      OneJunction\p => ω_B;
      OneJunction1\p => EULER_EQUATIONS\translation;
      OneJunction1\p => v_B\p;
      OneJunction3\p => minus_skew_r_GB\p1;
      OneJunction3\p => OneJunction\p;
      OneJunction3\p => skew_r_GA\p1;
      R_alpha\p2 => OneJunction\p;
      R_alpha1\p2 => ZeroJunction1\p;
      R_OG\p2 => OneJunction1\p;
      skew_r_GA\p2 => ZeroJunction1\p;
      Splitter1\output -> R_OG\r;
      V_A => R_alpha1\p1;
      v_B\p => V_B;
      ZeroJunction1\p => OneJunction1\p;
      ω_A => R_alpha\p1;
     end;
     figures
      text 'V_G
' 432.6 236.7 color 0 14;
    implementation_end;
   Link2 318 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description><Attributes><GlobalRelations>// link 2 variables
parameters
	real global r_G2[3,1];
	real global DH[6,4];
	real global H_01[4,4];
	real global H_12[4,4];
	real global cos_alpha2;
	real global sin_alpha2;
	real global cos_theta2;
	real global sin_theta2;
variables
	real T_a2[4,4];
	real T_d3[4,4];
	real r_GA2[3,1];
	real r_GB2[3,1];
	real T_rG2[4,4];
	real inverse_T_rG2[4,4];
	real R_alpha2[4,4];
	real H_0_G2_init[4,4];
	real H_A_G_2[4,4];
	real H_G_A_2[4,4];
	real H_G_B_2[4,4];

equations
// transformation from frame A to frame G
	
	T_a2 = [1, 0, 0, DH[2,3];
			  0, 1, 0, 0;
			  0, 0, 1, 0;
			  0, 0, 0, 1];
	
	R_alpha2 = [1, 0, 0, 0;
					0, cos_alpha2, -sin_alpha2, 0;
					0, sin_alpha2, cos_alpha2, 0;
					0, 0, 0, 1];

	T_rG2 = [1, 0, 0, r_G2[1,1];
				0, 1, 0, r_G2[2,1];
				0, 0, 1, r_G2[3,1];
				0, 0, 0, 1];
	
	H_0_G2_init = H_01 * H_12 * T_rG2;			

	H_A_G_2 = T_a2 * R_alpha2 * T_rG2;
	H_G_A_2 = inverse(H_A_G_2);
	r_GA2[1,1] = H_G_A_2[1,4];
	r_GA2[2,1] = H_G_A_2[2,4];
	r_GA2[3,1] = H_G_A_2[3,4];
	

	// transformation from frame G to frame B

	T_d3 = [1, 0, 0, 0;
			  0, 1, 0, 0;
			  0, 0, 1, DH[3,2];
			  0, 0, 0, 1];
	inverse_T_rG2 = inverse(T_rG2);
	H_G_B_2 = inverse_T_rG2 * T_d3;
	r_GB2[1,1] = H_G_B_2[1,4];
	r_GB2[2,1] = H_G_B_2[2,4];
  r_GB2[3,1] = H_G_B_2[3,4];</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power out V_B [3,1];
      power in ω_A [3,1];
      power out ω_B [3,1];
      signal out pc2 [3,1];
    end;
    icon bg
     figures
      rectangle 292 -8 344 40 color 0 fill 15132390;
      text 'name' 318 16 color 0 16;
     terminals
      V_B 346 32 fixed;
      ω_B 346 0 fixed;
    end;
    implementation bg
     submodels
      EULER_EQUATIONS 456 140
       description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Submodel
        ports
         power in rotation [3,1];
         power in translation [3,1];
         signal out P_OG [3,1];
         signal out R_OG [3,3];
         signal out pc2 [3,1];
       end;
       implementation eq
parameters
	real global m2;
	real global J2[3,3];
	
variables
	real p[3,1], h[3,1];
	real V_G[3,1], ω_B[3,1];
	real F[3,1], tau[3,1];
	real global H_0_G2_init[4,4];
	real R_OG_0[3,3];
	real P_OG_0[3,1];
	
equations
//	R_OG_0 = [0 , 0, 0;		0, 0, 0; 	0, 0, 0];
// Inizialization of rotation and translation part of H_O_G1
	R_OG_0 = H_0_G2_init[1:3, 1:3];
	P_OG_0 = H_0_G2_init[1:3, 4];
 	//P_OG_0 = [0;0;0];
	
// Assign inatial value for V_G and ω_B, from power inputs
	V_G = translation.f;
	ω_B = rotation.f;

	F = translation.e;
	tau = rotation.e;

// Compute trans. momenta and rot. moment
	p = int(F - skew(ω_B)*p);
	h = int(tau - skew(ω_B)*h);
	
	R_OG = int(R_OG * skew(ω_B), R_OG_0); // Computation of rot matrix between 0 frame and body frame(G frame)
	P_OG = int(R_OG * V_G, P_OG_0); // Computation of position of center of gravity respect frame 0

// Recalculation of the new V_G and ω_B
	translation.f = p/m2;
	rotation.f = inverse(J2)*h;
	implementation_end;
      Gravity_applied 688 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\Se-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:25</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'Se-3'
        ports
         power out p [3,1];
        restrictions
         causality fixed out p;
       end;
       icon bg ellipse bottom
        figures
         text 'Se' 688 216 color 0 18 bold;
       end;
       implementation eq
parameters
	real global m2;
	real global g;
	real effort[3,1] = [0; 0; -m2*g];
variables
	real flow [3,1];
equations
	p.e = effort; 
	flow = p.f;
implementation_end;
      minus_skew_r_GB 192 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GB</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 192 344 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GB2[3,1];
	
equations		
	p1.e = transpose(-skew(r_GB2)) * p2.e;
	p2.f = -skew(r_GB2) * p1.f;

implementation_end;
      plug V_A 272 296;
      plug V_B 456 408;
      plug ω_A 48 136;
      plug ω_B 192 56;
      plug pc2 456 88;
      OneJunction 192 136
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 136 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 456 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 456 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction3 192 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R_alpha 120 136
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B = ω_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 120 136 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha2[4,4];		
	real out_Ralpha2[3,3];
equations					
	out_Ralpha2 = R_alpha2[1:3, 1:3];

	//p1.e = transpose(out_Ralpha2) * p2.e;
	//p2.f = out_Ralpha2 * p1.f;
	p1.e = out_Ralpha2 * p2.e;
	p2.f = transpose(out_Ralpha2) * p1.f;
implementation_end;
      R_alpha1 336 296
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_B = V_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 336 296 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha2[4,4];		
	real out_Ralpha2[3,3];
equations					
	out_Ralpha2 = R_alpha2[1:3, 1:3];

	//p1.e = transpose(out_Ralpha2) * p2.e;
	//p2.f = out_Ralpha2 * p1.f;
	p1.e = out_Ralpha2 * p2.e;
	p2.f = transpose(out_Ralpha2) * p1.f;implementation_end;
      R_OG 600 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:21</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'MTF' 600 216 color 0 18 bold;
       end;
       implementation eq
equations					
	//p1.f = r * p2.f;
	//p2.e = transpose(r) * p1.e;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      skew_r_GA 256 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GA</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 256 216 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GA2[3,1];
	
equations		
	p1.e = transpose(skew(r_GA2)) * p2.e;
	p2.f = skew(r_GA2) * p1.f;

implementation_end;
      Splitter1 600 136
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 596.8 132.8 603.2 139.2 color -1 fill 0;
         ellipse 595.7 131.7 604.3 140.3 color -1;
        terminals
         input 600 136 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      ZeroJunction 456 344
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 456 344 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 336 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_G = V_A - ω_B X r_GA</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 336 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      EULER_EQUATIONS\P_OG -> pc2;
      EULER_EQUATIONS\R_OG -> Splitter1\input;
      Gravity_applied\p => R_OG\p1;
      minus_skew_r_GB\p2 => ZeroJunction\p;
      OneJunction\p => EULER_EQUATIONS\rotation;
      OneJunction\p => ω_B;
      OneJunction1\p => EULER_EQUATIONS\translation;
      OneJunction1\p => ZeroJunction\p;
      OneJunction3\p => minus_skew_r_GB\p1;
      OneJunction3\p => OneJunction\p;
      OneJunction3\p => skew_r_GA\p1;
      R_alpha\p2 => OneJunction\p;
      R_alpha1\p2 => ZeroJunction1\p;
      R_OG\p2 => OneJunction1\p;
      skew_r_GA\p2 => ZeroJunction1\p;
      Splitter1\output -> R_OG\r;
      V_A => R_alpha1\p1;
      ZeroJunction\p => V_B;
      ZeroJunction1\p => OneJunction1\p;
      ω_A => R_alpha\p1;
     end;
     figures
      text 'V_G
' 432.6 236.7 color 0 14;
    implementation_end;
   Link3 494 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description><Attributes><GlobalRelations>// link 3 variables
parameters
	real global r_G3[3,1];
	real global DH[6,4];
	real global H_01[4,4];
	real global H_12[4,4];
	real global H_23[4,4];
	real global cos_alpha3;
	real global sin_alpha3;
	real global cos_theta3;
	real global sin_theta3;
variables
	real T_a3[4,4];
	real T_d4[4,4];
	real r_GA3[3,1];
	real r_GB3[3,1];
	real T_rG3[4,4];
	real inverse_T_rG3[4,4];
	real R_alpha3[4,4];
	real H_0_G3_init[4,4];
	real H_A_G_3[4,4];
	real H_G_A_3[4,4];
	real H_G_B_3[4,4];

equations
// transformation from frame A to frame G
	
	T_a3 = [1, 0, 0, DH[3,3];
			  0, 1, 0, 0;
			  0, 0, 1, 0;
			  0, 0, 0, 1];
	
	R_alpha3 = [1, 0, 0, 0;
					0, cos_alpha3, -sin_alpha3, 0;
					0, sin_alpha3, cos_alpha3, 0;
					0, 0, 0, 1];

	T_rG3 = [1, 0, 0, r_G3[1,1];
				0, 1, 0, r_G3[2,1];
				0, 0, 1, r_G3[3,1];
				0, 0, 0, 1];
	
	H_0_G3_init = H_01 * H_12 * H_23 * T_rG3;			

	H_A_G_3 = T_a3 * R_alpha3 * T_rG3;
	H_G_A_3 = inverse(H_A_G_3);
	r_GA3[1,1] = H_G_A_3[1,4];
	r_GA3[2,1] = H_G_A_3[2,4];
	r_GA3[3,1] = H_G_A_3[3,4];
	

	// transformation from frame G to frame B

	T_d4 = [1, 0, 0, 0;
			  0, 1, 0, 0;
			  0, 0, 1, DH[4,2];
			  0, 0, 0, 1];
	inverse_T_rG3 = inverse(T_rG3);
	H_G_B_3 = inverse_T_rG3 * T_d4;
	r_GB3[1,1] = H_G_B_3[1,4];
	r_GB3[2,1] = H_G_B_3[2,4];
   r_GB3[3,1] = H_G_B_3[3,4];</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power out V_B [3,1];
      power in ω_A [3,1];
      power out ω_B [3,1];
      signal out pc3 [3,1];
    end;
    icon bg
     figures
      rectangle 468 -8 520 40 color 0 fill 15132390;
      text 'name' 494 16 color 0 16;
     terminals
      V_B 522 32 fixed;
      ω_B 522 0 fixed;
    end;
    implementation bg
     submodels
      EULER_EQUATIONS 456 140
       description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Submodel
        ports
         power in rotation [3,1];
         power in translation [3,1];
         signal out P_OG [3,1];
         signal out R_OG [3,3];
         signal out pc3 [3,1];
       end;
       implementation eq
parameters
	real global m3;
	real global J3[3,3];
	
variables
	real p[3,1], h[3,1];
	real V_G[3,1], ω_B[3,1];
	real F[3,1], tau[3,1];
	real global H_0_G3_init[4,4];
	real R_OG_0[3,3];
	real P_OG_0[3,1];
	
equations
//	R_OG_0 = [0 , 0, 0;		0, 0, 0; 	0, 0, 0];
// Inizialization of rotation and translation part of H_O_G1
	R_OG_0 = H_0_G3_init[1:3, 1:3];
	P_OG_0 = H_0_G3_init[1:3, 4];
 	//P_OG_0 = [0;0;0];
	
// Assign inatial value for V_G and ω_B, from power inputs
	V_G = translation.f;
	ω_B = rotation.f;

	F = translation.e;
	tau = rotation.e;

// Compute trans. momenta and rot. moment
	p = int(F - skew(ω_B)*p);
	h = int(tau - skew(ω_B)*h);
	
	R_OG = int(R_OG * skew(ω_B), R_OG_0); // Computation of rot matrix between 0 frame and body frame(G frame)
	P_OG = int(R_OG * V_G, P_OG_0); // Computation of position of center of gravity respect frame 0

// Recalculation of the new V_G and ω_B
	translation.f = p/m3;
	rotation.f = inverse(J3)*h;
	implementation_end;
      Gravity_applied 688 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\Se-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:25</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'Se-3'
        ports
         power out p [3,1];
        restrictions
         causality fixed out p;
       end;
       icon bg ellipse bottom
        figures
         text 'Se' 688 216 color 0 18 bold;
       end;
       implementation eq
parameters
	real global m3;
	real global g;
	real effort[3,1] = [0; 0; -m3*g];
variables
	real flow [3,1];
equations
	p.e = effort; 
	flow = p.f;
implementation_end;
      minus_skew_r_GB 192 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GB</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 192 344 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GB3[3,1];
	
equations		
	p1.e = transpose(-skew(r_GB3)) * p2.e;
	p2.f = -skew(r_GB3) * p1.f;

implementation_end;
      plug V_A 272 296;
      plug V_B 456 408;
      plug ω_A 48 136;
      plug ω_B 192 56;
      plug pc3 456 80;
      OneJunction 192 136
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 136 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 456 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 456 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction3 192 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R_alpha 120 136
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B = ω_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 120 136 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha3[4,4];		
	real out_Ralpha3[3,3];
equations					
	out_Ralpha3 = R_alpha3[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha3 * p2.e;
	p2.f = transpose(out_Ralpha3) * p1.f;
implementation_end;
      R_alpha1 336 296
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_B = V_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 336 296 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha3[4,4];		
	real out_Ralpha3[3,3];
equations					
	out_Ralpha3 = R_alpha3[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha3 * p2.e;
	p2.f = transpose(out_Ralpha3) * p1.f;
implementation_end;
      R_OG 600 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:21</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'MTF' 600 216 color 0 18 bold;
       end;
       implementation eq
equations					
	//p1.f = r * p2.f;
	//p2.e = transpose(r) * p1.e;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      skew_r_GA 256 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GA</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 256 216 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GA3[3,1];
	
equations		
	p1.e = transpose(skew(r_GA3)) * p2.e;
	p2.f = skew(r_GA3) * p1.f;

implementation_end;
      Splitter1 600 136
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 596.8 132.8 603.2 139.2 color -1 fill 0;
         ellipse 595.7 131.7 604.3 140.3 color -1;
        terminals
         input 600 136 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      v_B 456 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>v_B = v_G + skew(r_GB) x w</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse right
        figures
         text '0' 456 344 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 336 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_G = V_A - ω_B X r_GA</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 336 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      EULER_EQUATIONS\P_OG -> pc3;
      EULER_EQUATIONS\R_OG -> Splitter1\input;
      Gravity_applied\p => R_OG\p1;
      minus_skew_r_GB\p2 => v_B\p;
      OneJunction\p => EULER_EQUATIONS\rotation;
      OneJunction\p => ω_B;
      OneJunction1\p => EULER_EQUATIONS\translation;
      OneJunction1\p => v_B\p;
      OneJunction3\p => minus_skew_r_GB\p1;
      OneJunction3\p => OneJunction\p;
      OneJunction3\p => skew_r_GA\p1;
      R_alpha\p2 => OneJunction\p;
      R_alpha1\p2 => ZeroJunction1\p;
      R_OG\p2 => OneJunction1\p;
      skew_r_GA\p2 => ZeroJunction1\p;
      Splitter1\output -> R_OG\r;
      V_A => R_alpha1\p1;
      v_B\p => V_B;
      ZeroJunction1\p => OneJunction1\p;
      ω_A => R_alpha\p1;
     end;
     figures
      text 'V_G
' 432.6 236.7 color 0 14;
    implementation_end;
   Link4 694 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description><Attributes><GlobalRelations>// link 4 variables
parameters
	real global r_G4[3,1];
	real global DH[6,4];
	real global H_01[4,4];
	real global H_12[4,4];
	real global H_23[4,4];
	real global H_34[4,4];
	real global cos_alpha4;
	real global sin_alpha4;
	real global cos_theta4;
	real global sin_theta4;
variables
	real T_a4[4,4];
	real T_d5[4,4];
	real r_GA4[3,1];
	real r_GB4[3,1];
	real T_rG4[4,4];
	real inverse_T_rG4[4,4];
	real R_alpha4[4,4];
	real H_0_G4_init[4,4];
	real H_A_G_4[4,4];
	real H_G_A_4[4,4];
	real H_G_B_4[4,4];

equations
// transformation from frame A to frame G
	
	T_a4 = [1, 0, 0, DH[4,3];
			  0, 1, 0, 0;
			  0, 0, 1, 0;
			  0, 0, 0, 1];
	
	R_alpha4 = [1, 0, 0, 0;
					0, cos_alpha4, -sin_alpha4, 0;
					0, sin_alpha4, cos_alpha4, 0;
					0, 0, 0, 1];

	T_rG4 = [1, 0, 0, r_G4[1,1];
				0, 1, 0, r_G4[2,1];
				0, 0, 1, r_G4[3,1];
				0, 0, 0, 1];
	
	H_0_G4_init = H_01 * H_12 * H_23 * H_34 * T_rG4;			

	H_A_G_4 = T_a4 * R_alpha4 * T_rG4;
	H_G_A_4 = inverse(H_A_G_4);
	r_GA4[1,1] = H_G_A_4[1,4];
	r_GA4[2,1] = H_G_A_4[2,4];
	r_GA4[3,1] = H_G_A_4[3,4];
	

	// transformation from frame G to frame B

	T_d5 = [1, 0, 0, 0;
			  0, 1, 0, 0;
			  0, 0, 1, DH[5,2];
			  0, 0, 0, 1];
	inverse_T_rG4 = inverse(T_rG4);
	H_G_B_4 = inverse_T_rG4 * T_d5;
	r_GB4[1,1] = H_G_B_4[1,4];
	r_GB4[2,1] = H_G_B_4[2,4];
   r_GB4[3,1] = H_G_B_4[3,4];</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power out V_B [3,1];
      power in ω_A [3,1];
      power out ω_B [3,1];
      signal out pc4 [3,1];
    end;
    icon bg
     figures
      rectangle 668 -8 720 40 color 0 fill 15132390;
      text 'name' 694 16 color 0 16;
     terminals
      V_B 722 32 fixed;
      ω_B 722 0 fixed;
    end;
    implementation bg
     submodels
      EULER_EQUATIONS 456 140
       description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Submodel
        ports
         power in rotation [3,1];
         power in translation [3,1];
         signal out P_OG [3,1];
         signal out R_OG [3,3];
         signal out pc4 [3,1];
       end;
       implementation eq
parameters
	real global m4;
	real global J4[3,3];
	
variables
	real p[3,1], h[3,1];
	real V_G[3,1], ω_B[3,1];
	real F[3,1], tau[3,1];
	real global H_0_G4_init[4,4];
	real R_OG_0[3,3];
	real P_OG_0[3,1];
	
equations
//	R_OG_0 = [0 , 0, 0;		0, 0, 0; 	0, 0, 0];
// Inizialization of rotation and translation part of H_O_G1
	R_OG_0 = H_0_G4_init[1:3, 1:3];
	P_OG_0 = H_0_G4_init[1:3, 4];
 	//P_OG_0 = [0;0;0];
	
// Assign inatial value for V_G and ω_B, from power inputs
	V_G = translation.f;
	ω_B = rotation.f;

	F = translation.e;
	tau = rotation.e;

// Compute trans. momenta and rot. moment
	p = int(F - skew(ω_B)*p);
	h = int(tau - skew(ω_B)*h);
	
	R_OG = int(R_OG * skew(ω_B), R_OG_0); // Computation of rot matrix between 0 frame and body frame(G frame)
	P_OG = int(R_OG * V_G, P_OG_0); // Computation of position of center of gravity respect frame 0

// Recalculation of the new V_G and ω_B
	translation.f = p/m4;
	rotation.f = inverse(J4)*h;
	implementation_end;
      Gravity_applied 688 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\Se-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:25</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'Se-3'
        ports
         power out p [3,1];
        restrictions
         causality fixed out p;
       end;
       icon bg ellipse bottom
        figures
         text 'Se' 688 216 color 0 18 bold;
       end;
       implementation eq
parameters
	real global m4;
	real global g;
	real effort[3,1] = [0; 0; -m4*g];
variables
	real flow [3,1];
equations
	p.e = effort; 
	flow = p.f;
implementation_end;
      minus_skew_r_GB 192 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GB</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 192 344 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GB4[3,1];
	
equations		
	p1.e = transpose(-skew(r_GB4)) * p2.e;
	p2.f = -skew(r_GB4) * p1.f;

implementation_end;
      plug V_A 272 296;
      plug V_B 456 408;
      plug ω_A 48 136;
      plug ω_B 192 56;
      plug pc4 456 88;
      OneJunction 192 136
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 136 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 456 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 456 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction3 192 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R_alpha 120 136
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B = ω_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 120 136 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha4[4,4];		
	real out_Ralpha4[3,3];
equations					
	out_Ralpha4 = R_alpha4[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha4 * p2.e;
	p2.f = transpose(out_Ralpha4) * p1.f;
implementation_end;
      R_alpha1 336 296
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_B = V_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 336 296 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha4[4,4];		
	real out_Ralpha4[3,3];
equations					
	out_Ralpha4 = R_alpha4[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha4 * p2.e;
	p2.f = transpose(out_Ralpha4) * p1.f;
implementation_end;
      R_OG 600 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:21</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'MTF' 600 216 color 0 18 bold;
       end;
       implementation eq
equations					
	//p1.f = r * p2.f;
	//p2.e = transpose(r) * p1.e;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      skew_r_GA 256 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GA</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 256 216 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GA4[3,1];
	
equations		
	p1.e = transpose(skew(r_GA4)) * p2.e;
	p2.f = skew(r_GA4) * p1.f;

implementation_end;
      Splitter1 600 136
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 596.8 132.8 603.2 139.2 color -1 fill 0;
         ellipse 595.7 131.7 604.3 140.3 color -1;
        terminals
         input 600 136 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      v_B 456 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>v_B = v_G + skew(r_GB) x w</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse right
        figures
         text '0' 456 344 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 336 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_G = V_A - ω_B X r_GA</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 336 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      EULER_EQUATIONS\P_OG -> pc4;
      EULER_EQUATIONS\R_OG -> Splitter1\input;
      Gravity_applied\p => R_OG\p1;
      minus_skew_r_GB\p2 => v_B\p;
      OneJunction\p => EULER_EQUATIONS\rotation;
      OneJunction\p => ω_B;
      OneJunction1\p => EULER_EQUATIONS\translation;
      OneJunction1\p => v_B\p;
      OneJunction3\p => minus_skew_r_GB\p1;
      OneJunction3\p => OneJunction\p;
      OneJunction3\p => skew_r_GA\p1;
      R_alpha\p2 => OneJunction\p;
      R_alpha1\p2 => ZeroJunction1\p;
      R_OG\p2 => OneJunction1\p;
      skew_r_GA\p2 => ZeroJunction1\p;
      Splitter1\output -> R_OG\r;
      V_A => R_alpha1\p1;
      v_B\p => V_B;
      ZeroJunction1\p => OneJunction1\p;
      ω_A => R_alpha\p1;
     end;
     figures
      text 'V_G
' 432.6 236.7 color 0 14;
    implementation_end;
   Link5 894 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description><Attributes><GlobalRelations>// link 5 variables
parameters
	real global r_G5[3,1];
	real global DH[6,4];
	real global H_01[4,4];
	real global H_12[4,4];
	real global H_23[4,4];
	real global H_34[4,4];
	real global H_45[4,4];
	real global cos_alpha5;
	real global sin_alpha5;
	real global cos_theta5;
	real global sin_theta5;
variables
	real T_a5[4,4];
	real T_d6[4,4];
	real r_GA5[3,1];
	real r_GB5[3,1];
	real T_rG5[4,4];
	real inverse_T_rG5[4,4];
	real R_alpha5[4,4];
	real H_0_G5_init[4,4];
	real H_A_G_5[4,4];
	real H_G_A_5[4,4];
	real H_G_B_5[4,4];

equations
// transformation from frame A to frame G
	
	T_a5 = [1, 0, 0, DH[5,3];
			  0, 1, 0, 0;
			  0, 0, 1, 0;
			  0, 0, 0, 1];
	
	R_alpha5 = [1, 0, 0, 0;
					0, cos_alpha5, -sin_alpha5, 0;
					0, sin_alpha5, cos_alpha5, 0;
					0, 0, 0, 1];

	T_rG5 = [1, 0, 0, r_G5[1,1];
				0, 1, 0, r_G5[2,1];
				0, 0, 1, r_G5[3,1];
				0, 0, 0, 1];
	
	H_0_G5_init = H_01 * H_12 * H_23 * H_34 * H_45 * T_rG5;			

	H_A_G_5 = T_a5 * R_alpha5 * T_rG5;
	H_G_A_5 = inverse(H_A_G_5);
	r_GA5[1,1] = H_G_A_5[1,4];
	r_GA5[2,1] = H_G_A_5[2,4];
	r_GA5[3,1] = H_G_A_5[3,4];
	

	// transformation from frame G to frame B

	T_d6 = [1, 0, 0, 0;
			  0, 1, 0, 0;
			  0, 0, 1, DH[6,2];
			  0, 0, 0, 1];
	inverse_T_rG5 = inverse(T_rG5);
	H_G_B_5 = inverse_T_rG5 * T_d6;
	r_GB5[1,1] = H_G_B_5[1,4];
	r_GB5[2,1] = H_G_B_5[2,4];
   r_GB5[3,1] = H_G_B_5[3,4];</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power out V_B [3,1];
      power in ω_A [3,1];
      power out ω_B [3,1];
      signal out pc5 [3,1];
    end;
    icon bg
     figures
      rectangle 868 -8 920 40 color 0 fill 15132390;
      text 'name' 894 16 color 0 16;
     terminals
      V_B 922 32 fixed;
      ω_B 922 0 fixed;
    end;
    implementation bg
     submodels
      EULER_EQUATIONS 456 140
       description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Submodel
        ports
         power in rotation [3,1];
         power in translation [3,1];
         signal out P_OG [3,1];
         signal out R_OG [3,3];
         signal out pc5 [3,1];
       end;
       implementation eq
parameters
	real global m5;
	real global J5[3,3];
	
variables
	real p[3,1], h[3,1];
	real V_G[3,1], ω_B[3,1];
	real F[3,1], tau[3,1];
	real global H_0_G5_init[4,4];
	real R_OG_0[3,3];
	real P_OG_0[3,1];
	
equations
//	R_OG_0 = [0 , 0, 0;		0, 0, 0; 	0, 0, 0];
// Inizialization of rotation and translation part of H_O_G1
	R_OG_0 = H_0_G5_init[1:3, 1:3];
	P_OG_0 = H_0_G5_init[1:3, 4];
 	//P_OG_0 = [0;0;0];
	
// Assign inatial value for V_G and ω_B, from power inputs
	V_G = translation.f;
	ω_B = rotation.f;

	F = translation.e;
	tau = rotation.e;

// Compute trans. momenta and rot. moment
	p = int(F - skew(ω_B)*p);
	h = int(tau - skew(ω_B)*h);
	
	R_OG = int(R_OG * skew(ω_B), R_OG_0); // Computation of rot matrix between 0 frame and body frame(G frame)
	P_OG = int(R_OG * V_G, P_OG_0); // Computation of position of center of gravity respect frame 0

// Recalculation of the new V_G and ω_B
	translation.f = p/m5;
	rotation.f = inverse(J5)*h;
	implementation_end;
      Gravity_applied 688 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\Se-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:25</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'Se-3'
        ports
         power out p [3,1];
        restrictions
         causality fixed out p;
       end;
       icon bg ellipse bottom
        figures
         text 'Se' 688 216 color 0 18 bold;
       end;
       implementation eq
parameters
	real global m5;
	real global g;
	real effort[3,1] = [0; 0; -m5*g];
variables
	real flow [3,1];
equations
	p.e = effort; 
	flow = p.f;
implementation_end;
      minus_skew_r_GB 192 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GB</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 192 344 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GB5[3,1];
	
equations		
	p1.e = transpose(-skew(r_GB5)) * p2.e;
	p2.f = -skew(r_GB5) * p1.f;

implementation_end;
      plug V_A 272 296;
      plug V_B 456 408;
      plug ω_A 48 136;
      plug ω_B 192 56;
      plug pc5 464 72;
      OneJunction 192 136
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 136 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 456 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 456 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction3 192 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R_alpha 120 136
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B = ω_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 120 136 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha5[4,4];		
	real out_Ralpha5[3,3];
equations					
	out_Ralpha5 = R_alpha5[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha5 * p2.e;
	p2.f = transpose(out_Ralpha5) * p1.f;
implementation_end;
      R_alpha1 336 296
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_B = V_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 336 296 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha5[4,4];		
	real out_Ralpha5[3,3];
equations					
	out_Ralpha5 = R_alpha5[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha5 * p2.e;
	p2.f = transpose(out_Ralpha5) * p1.f;
implementation_end;
      R_OG 600 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:21</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'MTF' 600 216 color 0 18 bold;
       end;
       implementation eq
equations					
	//p1.f = r * p2.f;
	//p2.e = transpose(r) * p1.e;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      skew_r_GA 256 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GA</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 256 216 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GA5[3,1];
	
equations		
	p1.e = transpose(skew(r_GA5)) * p2.e;
	p2.f = skew(r_GA5) * p1.f;

implementation_end;
      Splitter1 600 136
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 596.8 132.8 603.2 139.2 color -1 fill 0;
         ellipse 595.7 131.7 604.3 140.3 color -1;
        terminals
         input 600 136 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      v_B 456 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>v_B = v_G + skew(r_GB) x w</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse right
        figures
         text '0' 456 344 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 336 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_G = V_A - ω_B X r_GA</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 336 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      EULER_EQUATIONS\P_OG -> pc5;
      EULER_EQUATIONS\R_OG -> Splitter1\input;
      Gravity_applied\p => R_OG\p1;
      minus_skew_r_GB\p2 => v_B\p;
      OneJunction\p => EULER_EQUATIONS\rotation;
      OneJunction\p => ω_B;
      OneJunction1\p => EULER_EQUATIONS\translation;
      OneJunction1\p => v_B\p;
      OneJunction3\p => minus_skew_r_GB\p1;
      OneJunction3\p => OneJunction\p;
      OneJunction3\p => skew_r_GA\p1;
      R_alpha\p2 => OneJunction\p;
      R_alpha1\p2 => ZeroJunction1\p;
      R_OG\p2 => OneJunction1\p;
      skew_r_GA\p2 => ZeroJunction1\p;
      Splitter1\output -> R_OG\r;
      V_A => R_alpha1\p1;
      v_B\p => V_B;
      ZeroJunction1\p => OneJunction1\p;
      ω_A => R_alpha\p1;
     end;
     figures
      text 'V_G
' 432.6 236.7 color 0 14;
    implementation_end;
   Link6 1094 16
    description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description><Attributes><GlobalRelations>// link 6 variables
parameters
	real global r_G6[3,1];
	real global DH[6,4];
	real global H_01[4,4];
	real global H_12[4,4];
	real global H_23[4,4];
	real global H_34[4,4];
	real global H_45[4,4];
	real global H_56[4,4];
	real global cos_alpha6;
	real global sin_alpha6;
	real global cos_theta6;
	real global sin_theta6;
variables
	real T_a6[4,4];
	real r_GA6[3,1];
	real r_GB6[3,1];
	real T_rG6[4,4];
	real inverse_T_rG6[4,4];
	real R_alpha6[4,4];
	real H_0_G6_init[4,4];
	real H_A_G_6[4,4];
	real H_G_A_6[4,4];
	real H_G_B_6[4,4];

equations
// transformation from frame A to frame G
	
	T_a6 = [1, 0, 0, DH[6,3];
			  0, 1, 0, 0;
			  0, 0, 1, 0;
			  0, 0, 0, 1];
	
	R_alpha6 = [1, 0, 0, 0;
					0, cos_alpha6, -sin_alpha6, 0;
					0, sin_alpha6, cos_alpha6, 0;
					0, 0, 0, 1];

	T_rG6 = [1, 0, 0, r_G6[1,1];
				0, 1, 0, r_G6[2,1];
				0, 0, 1, r_G6[3,1];
				0, 0, 0, 1];
	
	H_0_G6_init = H_01 * H_12 * H_23 * H_34 * H_45 * H_56 * T_rG6;			

	H_A_G_6 = T_a6 * R_alpha6 * T_rG6;
	H_G_A_6 = inverse(H_A_G_6);
	r_GA6[1,1] = H_G_A_6[1,4];
	r_GA6[2,1] = H_G_A_6[2,4];
	r_GA6[3,1] = H_G_A_6[3,4];
	

	// transformation from frame G to frame B

	inverse_T_rG6 = inverse(T_rG6);
	H_G_B_6 = inverse_T_rG6;
	r_GB6[1,1] = H_G_B_6[1,4];
	r_GB6[2,1] = H_G_B_6[2,4];
   r_GB6[3,1] = H_G_B_6[3,4];</GlobalRelations></Attributes></Information>';
    type Submodel
     ports
      power in V_A [3,1];
      power out V_B [3,1];
      power in ω_A [3,1];
      power out ω_B [3,1];
      signal out pc6 [3,1];
    end;
    icon bg
     figures
      rectangle 1068 -8 1120 40 color 0 fill 15132390;
      text 'name' 1094 16 color 0 16;
     terminals
      V_B 1122 32 fixed;
      ω_B 1122 0 fixed;
    end;
    implementation bg
     submodels
      EULER_EQUATIONS 456 140
       description '<Information><Description><Version>4.0</Version><LibraryPath>System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Submodel
        ports
         power in rotation [3,1];
         power in translation [3,1];
         signal out P_OG [3,1];
         signal out R_OG [3,3];
         signal out pc6 [3,1];
       end;
       implementation eq
parameters
	real global m6;
	real global J6[3,3];
	
variables
	real p[3,1], h[3,1];
	real V_G[3,1], ω_B[3,1];
	real F[3,1], tau[3,1];
	real global H_0_G6_init[4,4];
	real R_OG_0[3,3];
	real P_OG_0[3,1];
	
equations
//	R_OG_0 = [0 , 0, 0;		0, 0, 0; 	0, 0, 0];
// Inizialization of rotation and translation part of H_O_G1
	R_OG_0 = H_0_G6_init[1:3, 1:3];
	P_OG_0 = H_0_G6_init[1:3, 4];
 	//P_OG_0 = [0;0;0];
	
// Assign inatial value for V_G and ω_B, from power inputs
	V_G = translation.f;
	ω_B = rotation.f;

	F = translation.e;
	tau = rotation.e;

// Compute trans. momenta and rot. moment
	p = int(F - skew(ω_B)*p);
	h = int(tau - skew(ω_B)*h);
	
	R_OG = int(R_OG * skew(ω_B), R_OG_0); // Computation of rot matrix between 0 frame and body frame(G frame)
	P_OG = int(R_OG * V_G, P_OG_0); // Computation of position of center of gravity respect frame 0

// Recalculation of the new V_G and ω_B
	translation.f = p/m6;
	rotation.f = inverse(J6)*h;
	implementation_end;
      Gravity_applied 688 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\Se-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:25</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'Se-3'
        ports
         power out p [3,1];
        restrictions
         causality fixed out p;
       end;
       icon bg ellipse bottom
        figures
         text 'Se' 688 216 color 0 18 bold;
       end;
       implementation eq
parameters
	real global m6;
	real global g;
	real effort[3,1] = [0; 0; -m6*g];
variables
	real flow [3,1];
equations
	p.e = effort; 
	flow = p.f;
implementation_end;
      minus_skew_r_GB 192 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GB</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 192 344 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GB6[3,1];
	
equations		
	p1.e = transpose(-skew(r_GB6)) * p2.e;
	p2.f = -skew(r_GB6) * p1.f;

implementation_end;
      plug V_A 272 296;
      plug V_B 456 408;
      plug ω_A 48 136;
      plug ω_B 192 56;
      plug pc6 472 80;
      OneJunction 192 136
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 136 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction1 456 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 456 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      OneJunction3 192 216
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:18</TimeStamp>
</Description>';
       knot OneJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out flow [3,1];
        restrictions
         causality constraint one_out p;
       end;
       icon bg ellipse
        figures
         text '1' 192 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
      R_alpha 120 136
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B = ω_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 120 136 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha6[4,4];		
	real out_Ralpha6[3,3];
equations					
	out_Ralpha6 = R_alpha6[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha6 * p2.e;
	p2.f = transpose(out_Ralpha6) * p1.f;
implementation_end;
      R_alpha1 336 296
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_B = V_A * R_alpha</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 336 296 color 0 18 bold;
       end;
       implementation eq
variables
	real global R_alpha6[4,4];		
	real out_Ralpha6[3,3];
equations					
	out_Ralpha6 = R_alpha6[1:3, 1:3];	
	//p1.e = transpose(out_Ralpha1) * p2.e;
	//p2.f = out_Ralpha1 * p1.f;
	p1.e = out_Ralpha6 * p2.e;
	p2.f = transpose(out_Ralpha6) * p1.f;
implementation_end;
      R_OG 600 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\MTF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:21</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type 'MTF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
         signal in r [3,3];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'MTF' 600 216 color 0 18 bold;
       end;
       implementation eq
equations					
	//p1.f = r * p2.f;
	//p2.e = transpose(r) * p1.e;
	p1.e = r * p2.e;
	p2.f = transpose(r) * p1.f;implementation_end;
      skew_r_GA 256 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\3D\TF-3.emx</LibraryPath><TimeStamp>2007-9-25 12:11:35</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>ω_B X r_GA</Description></Description></Information>';
       type 'TF-3'
        ports
         power in p1 [3,1];
         power out p2 [3,1];
        restrictions
         causality constraint not_equal p1 p2;
       end;
       icon bg ellipse bottom
        figures
         text 'TF' 256 216 color 0 18 bold;
       end;
       implementation eq
variables 
	real global r_GA6[3,1];
	
equations		
	p1.e = transpose(skew(r_GA6)) * p2.e;
	p2.f = skew(r_GA6) * p1.f;

implementation_end;
      Splitter1 600 136
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [3,3];
         signal knot in input [3,3];
       end;
       icon bg ellipse
        figures
         ellipse 596.8 132.8 603.2 139.2 color -1 fill 0;
         ellipse 595.7 131.7 604.3 140.3 color -1;
        terminals
         input 600 136 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      v_B 456 344
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>v_B = v_G + skew(r_GB) x w</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse right
        figures
         text '0' 456 344 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
      ZeroJunction1 336 216
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath><TimeStamp>2007-9-27 9:51:43</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Description>V_G = V_A - ω_B X r_GA</Description></Description></Information>';
       knot ZeroJunction
        ports
         power knot duplicatable none p [3,1];
         signal knot out effort [3,1];
        restrictions
         causality constraint one_in p;
       end;
       icon bg ellipse
        figures
         text '0' 336 216 color 0 18 bold;
       end;
       implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
     end;
     connections
      EULER_EQUATIONS\P_OG -> pc6;
      EULER_EQUATIONS\R_OG -> Splitter1\input;
      Gravity_applied\p => R_OG\p1;
      minus_skew_r_GB\p2 => v_B\p;
      OneJunction\p => EULER_EQUATIONS\rotation;
      OneJunction\p => ω_B;
      OneJunction1\p => EULER_EQUATIONS\translation;
      OneJunction1\p => v_B\p;
      OneJunction3\p => minus_skew_r_GB\p1;
      OneJunction3\p => OneJunction\p;
      OneJunction3\p => skew_r_GA\p1;
      R_alpha\p2 => OneJunction\p;
      R_alpha1\p2 => ZeroJunction1\p;
      R_OG\p2 => OneJunction1\p;
      skew_r_GA\p2 => ZeroJunction1\p;
      Splitter1\output -> R_OG\r;
      V_A => R_alpha1\p1;
      v_B\p => V_B;
      ZeroJunction1\p => OneJunction1\p;
      ω_A => R_alpha\p1;
     end;
     figures
      text 'V_G
' 432.6 236.7 color 0 14;
    implementation_end;
   MSe 224 176
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
    type MSe
     ports
      power out p;
      signal in effort;
     restrictions
      causality fixed out p;
    end;
    icon bg ellipse bottom
     figures
      text 'MSe' 224 176 color 0 18 bold;
    end;
    implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
   MSe1 32 200
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
    type MSe
     ports
      power out p;
      signal in effort;
     restrictions
      causality fixed out p;
    end;
    icon bg ellipse bottom
     figures
      text 'MSe' 32 200 color 0 18 bold;
    end;
    implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
   MSe2 400 184
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
    type MSe
     ports
      power out p;
      signal in effort;
     restrictions
      causality fixed out p;
    end;
    icon bg ellipse bottom
     figures
      text 'MSe' 400 184 color 0 18 bold;
    end;
    implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
   MSe3 600 200
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
    type MSe
     ports
      power out p;
      signal in effort;
     restrictions
      causality fixed out p;
    end;
    icon bg ellipse bottom
     figures
      text 'MSe' 600 200 color 0 18 bold;
    end;
    implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
   MSe4 784 192
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
    type MSe
     ports
      power out p;
      signal in effort;
     restrictions
      causality fixed out p;
    end;
    icon bg ellipse bottom
     figures
      text 'MSe' 784 192 color 0 18 bold;
    end;
    implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
   MSe5 1008 192
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSe.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:12:33</TimeStamp>
</Description>
</Information>';
    type MSe
     ports
      power out p;
      signal in effort;
     restrictions
      causality fixed out p;
    end;
    icon bg ellipse bottom
     figures
      text 'MSe' 1008 192 color 0 18 bold;
    end;
    implementation eq
variables
	real flow;
equations
	p.e = effort;
	flow = p.f;
implementation_end;
   Mux 538 -160
			specifications active 'inputs_6'
				specification 'inputs_2'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal out output [2,1];
   signal in input2;
 end;
 icon bg bottom
  figures
   line 0 0 0 32 color 0 width 2;
   rectangle 0 0 16 32 color -1;
   text '2' 6 26 color 8421504 8;
  terminals
   input1 0 8 fixed;
   output 0 16 fixed;
   input2 0 24 fixed;
 end;
 implementation eq
equations
	output = [input1; input2];implementation_end;
specification_end;
				specification 'inputs_3'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal out output [3,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 32 width 2;
   rectangle 0 0 16 32 color -1;
   text '3' 6 26 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   output 0 16 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal out output [4,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 48 width 2;
   rectangle 0 0 16 48 color -1;
   text '4' 6 42 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 32 fixed;
   input4 0 40 fixed;
   output 0 24 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal out output [5,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 48 width 2;
   rectangle 0 0 16 48 color -1;
   text '5' 6 42 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   input4 0 32 fixed;
   input5 0 40 fixed;
   output 0 24 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5];implementation_end;
specification_end;
				specification 'inputs_6'
 description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal out output [1,6];
 end;
 icon bg bottom
  figures
   line 506 -158 570 -158 color 0 width 2;
   rectangle 522 -194 550 -126 color -1;
   text '6' 564 -164 color 8421504 8;
  terminals
   input1 514 -158 fixed;
   input2 522 -158 fixed;
   input3 530 -158 fixed;
   input4 546 -158 fixed;
   input5 554 -158 fixed;
   input6 562 -158 fixed;
   output 538 -158 fixed;
 end;
 implementation eq
equations
	output = [input1, input2, input3, input4, input5, input6];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal in input7;
   signal out output [7,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 64 width 2;
   rectangle 0 0 16 64 color -1;
   text '7' 6 58 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   input4 0 32 fixed;
   input5 0 40 fixed;
   input6 0 48 fixed;
   input7 0 56 fixed;
   output 0 32 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6; input7];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal in input7;
   signal in input8;
   signal out output [8,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 80 width 2;
   rectangle 0 0 16 80 color -1;
   text '8' 6 72 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   input4 0 32 fixed;
   input5 0 48 fixed;
   input6 0 56 fixed;
   input7 0 64 fixed;
   input8 0 72 fixed;
   output 0 40 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6; input7; input8];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal in input7;
   signal in input8;
   signal in input9;
   signal out output [9,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 80 width 2;
   rectangle 0 0 16 80  color -1;
   text '9' 6 74 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   input4 0 32 fixed;
   input5 0 40 fixed;
   input6 0 48 fixed;
   input7 0 56 fixed;
   input8 0 64 fixed;
   input9 0 72 fixed;
   output 0 40 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6; input7; input8; input9];implementation_end;
specification_end;
			end;
   Mux1 514 424
			specifications active 'inputs_6'
				specification 'inputs_2'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal out output [2,1];
   signal in input2;
 end;
 icon bg bottom
  figures
   line 0 0 0 32 color 0 width 2;
   rectangle 0 0 16 32 color -1;
   text '2' 6 26 color 8421504 8;
  terminals
   input1 0 8 fixed;
   output 0 16 fixed;
   input2 0 24 fixed;
 end;
 implementation eq
equations
	output = [input1; input2];implementation_end;
specification_end;
				specification 'inputs_3'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal out output [3,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 32 width 2;
   rectangle 0 0 16 32 color -1;
   text '3' 6 26 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   output 0 16 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3];implementation_end;
specification_end;
				specification 'inputs_4'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal out output [4,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 48 width 2;
   rectangle 0 0 16 48 color -1;
   text '4' 6 42 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 32 fixed;
   input4 0 40 fixed;
   output 0 24 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4];implementation_end;
specification_end;
				specification 'inputs_5'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal out output [5,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 48 width 2;
   rectangle 0 0 16 48 color -1;
   text '5' 6 42 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   input4 0 32 fixed;
   input5 0 40 fixed;
   output 0 24 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5];implementation_end;
specification_end;
				specification 'inputs_6'
 description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal out output [1,6];
 end;
 icon bg bottom
  figures
   line 482 426 546 426 color 0 width 2;
   rectangle 498 390 526 458 color -1;
   text '6' 540 420 color 8421504 8;
  terminals
   input1 490 426 fixed;
   input2 498 426 fixed;
   input3 506 426 fixed;
   input4 522 426 fixed;
   input5 530 426 fixed;
   input6 538 426 fixed;
   output 514 426 fixed;
 end;
 implementation eq
equations
	output = [input1, input2, input3, input4, input5, input6];implementation_end;
specification_end;
				specification 'inputs_7'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal in input7;
   signal out output [7,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 64 width 2;
   rectangle 0 0 16 64 color -1;
   text '7' 6 58 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   input4 0 32 fixed;
   input5 0 40 fixed;
   input6 0 48 fixed;
   input7 0 56 fixed;
   output 0 32 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6; input7];implementation_end;
specification_end;
				specification 'inputs_8'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal in input7;
   signal in input8;
   signal out output [8,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 80 width 2;
   rectangle 0 0 16 80 color -1;
   text '8' 6 72 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   input4 0 32 fixed;
   input5 0 48 fixed;
   input6 0 56 fixed;
   input7 0 64 fixed;
   input8 0 72 fixed;
   output 0 40 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6; input7; input8];implementation_end;
specification_end;
				specification 'inputs_9'
description '<Description>
   <Version>4.8</Version>
  <LibraryPath>Signal\Block Diagram\Mux.emx</LibraryPath>
  <TimeStamp>2019-06-26 12:00:00</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
 type Mux
  ports
   signal in input1;
   signal in input2;
   signal in input3;
   signal in input4;
   signal in input5;
   signal in input6;
   signal in input7;
   signal in input8;
   signal in input9;
   signal out output [9,1];
 end;
 icon bg bottom
  figures
   line 0 0 0 80 width 2;
   rectangle 0 0 16 80  color -1;
   text '9' 6 74 color 8421504 8;
  terminals
   input1 0 8 fixed;
   input2 0 16 fixed;
   input3 0 24 fixed;
   input4 0 32 fixed;
   input5 0 40 fixed;
   input6 0 48 fixed;
   input7 0 56 fixed;
   input8 0 64 fixed;
   input9 0 72 fixed;
   output 0 40 fixed;
 end;
 implementation eq
equations
	output = [input1; input2; input3; input4; input5; input6; input7; input8; input9];implementation_end;
specification_end;
			end;
   OneJunction -56 0
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
    knot OneJunction
     ports
      power knot duplicatable none p [3,1];
      signal knot out flow [3,1];
     restrictions
      causality constraint one_out p;
    end;
    icon bg ellipse
     figures
      text '1' -56 0 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
   OneJunction1 -56 32
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
    knot OneJunction
     ports
      power knot duplicatable none p [3,1];
      signal knot out flow [3,1];
     restrictions
      causality constraint one_out p;
    end;
    icon bg ellipse
     figures
      text '1' -56 32 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
   PD_with_Gravity_Compensation 512 360
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Graphical.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>True</KeepParameterValues><TimeStamp>2007-11-1 22:32:34</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
    type 'Submodel-Graphical'
     ports
      signal in q_d [1,6];
      signal out u [1,6];
      signal in q [1,6];
      signal in q_dot [1,6];
    end;
    icon bg
     figures
      rectangle 416 344 608 376 color 0 fill 15132390;
      text 'name' 512 360 color 0 16;
    end;
    implementation bg
     submodels
      g 244 188
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Submodel-Equation'
        ports
         signal in q [1,6];
         signal out g_q [1,6];
       end;
       implementation eq
parameters
	real g_t[1,3] = [0 , 0, -9.81];

	real global m1;
	real global m2;
	real global m3;
	real global m4;
	real global m5;
	real global m6;
	
	real m[6,1] = [m1;
							m2;
							m3;
							m4;
							m5;
							m6];
	
variables
	real P;
	real dp1;
	real dp2;
	real dp3;
	real dp4;
	real dp5;
	real dp6;
	real q1; 		
	real q2;
	real q3;	
	real q4;	
	real q5;	
	real q6;					
equations
	q1 = q[1,1];	
	q2 = q[1,2];
	q3 = q[1,3];
	q4 = q[1,4];
	q5 = q[1,5];
	q6 = q[1,6];
 	dp1 = 0;
	dp2 = 1.376*sin(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) - 14.89*cos(q2)*cos(q3) - 37.35*cos(q2) + 14.89*sin(q2)*sin(q3) - 0.3294*cos(q5)*(0.0007963*sin(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) + 0.0007963*cos(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2))) - 0.3294*sin(q5)*(cos(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) - 1.0*sin(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2))) + 1.376*cos(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2));
	dp3 = 1.376*sin(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) - 14.89*cos(q2)*cos(q3) + 14.89*sin(q2)*sin(q3) - 0.3294*cos(q5)*(0.0007963*sin(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) + 0.0007963*cos(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2))) - 0.3294*sin(q5)*(cos(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) - 1.0*sin(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2))) + 1.376*cos(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2));
	dp4 = 1.376*sin(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) - 0.3294*cos(q5)*(0.0007963*sin(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) + 0.0007963*cos(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2))) - 0.3294*sin(q5)*(cos(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) - 1.0*sin(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2))) + 1.376*cos(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2));
	dp5 = - 0.3294*sin(q5)*(0.0007963*cos(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) - 0.0007963*sin(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2))) - 0.3294*cos(q5)*(sin(q4)*(cos(q2)*cos(q3) - 1.0*sin(q2)*sin(q3)) + cos(q4)*(cos(q2)*sin(q3) + cos(q3)*sin(q2)));
	dp6 = 0;
	
 	g_q = [dp1, dp2,	dp3,	dp4, dp5, dp6];implementation_end;
      Kd 264 40
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath><TimeStamp>2007-9-26 12:15:12</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Gain
        ports
         signal in input [1,6];
         signal out output [1,6];
       end;
       icon bg bottom
        figures
         rectangle 248.1 24 279.9 56 color 0 fill 15132390;
         text 'Kd' 264 40 color 16711680 16 bold;
        terminals
         input 280 40 fixed;
         output 248 40 fixed;
       end;
       implementation eq
parameters
	real global Kd;
	real K[6,6] = [Kd, 0, 0, 0, 0, 0;
							0, Kd, 0, 0, 0, 0;
							0, 0, Kd, 0, 0, 0;
							0, 0, 0, Kd, 0, 0;
							0, 0, 0, 0, Kd, 0;
							0, 0, 0, 0, 0, Kd];
equations
	output = input * K;
    implementation_end;
      Kp 128 120
       description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath><TimeStamp>2007-9-26 12:15:12</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
       type Gain
        ports
         signal in input [1,6];
         signal out output [1,6];
       end;
       icon bg bottom
        figures
         rectangle 112.1 104 143.9 136 color 0 fill 15132390;
         text 'Kp' 128 120 color 16711680 16 bold;
        terminals
         input 112 120 fixed;
         output 144 120 fixed;
       end;
       implementation eq
parameters
	real global Kp;
	real K [6, 6] = [Kp, 0, 0, 0, 0, 0;
								0, Kp, 0, 0, 0, 0;
								0, 0, Kp, 0, 0, 0;
								0, 0, 0, Kp, 0, 0;
								0, 0, 0, 0, Kp, 0;
								0, 0, 0, 0, 0, Kp];
					
equations
	output = input * K;
    implementation_end;
      plug u 312 120;
      plug q 352 192;
      plug q_dot 376 40;
      plug q_d 0 120;
      Splitter1 304 192
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1,6];
         signal knot in input [1,6];
       end;
       icon bg ellipse
        figures
         ellipse 300.8 188.8 307.2 195.2 color -1 fill 0;
         ellipse 299.7 187.7 308.3 196.3 color -1;
        terminals
         input 304 192 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Sum 40 120
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Sum-Equation'
        ports
         signal in q_d [1,6];
         signal out q_tilde [1,6];
         signal in q [1,6];
       end;
       icon bg ellipse
        figures
         ellipse 32 112 48 128 color 0 fill 15132390;
        terminals
         q_d 32 120 fixed;
         q_tilde 48 120 fixed;
         q 40 128 fixed;
       end;
       implementation eq
equations
	q_tilde = [(q_d[1,1] - q[1,1]), (q_d[1,2] - q[1,2]), (q_d[1,3] - q[1,3]), (q_d[1,4] - q[1,4]), (q_d[1,5] - q[1,5]),(q_d[1,6] - q[1,6])];						
	
 implementation_end;
      Sum1 192 120
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Sum-Equation'
        ports
         signal in q_tilde [1,6];
         signal out output [1,6];
         signal in q_dot [1,6];
       end;
       icon bg ellipse
        figures
         ellipse 184 112 200 128 color 0 fill 15132390;
        terminals
         q_tilde 184 120 fixed;
         output 200 120 fixed;
         q_dot 192 112 fixed;
       end;
       implementation eq
equations
	output = [(q_tilde[1,1] + q_dot[1,1]), (q_tilde[1,2] + q_dot[1,2]), (q_tilde[1,3] + q_dot[1,3]), (q_tilde[1,4] + q_dot[1,4]), (q_tilde[1,5] + q_dot[1,5]),(q_tilde[1,6] + q_dot[1,6])];						
	
 implementation_end;
      Sum2 240 120
       description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
       type 'Sum-Equation'
        ports
         signal in input [1,6];
         signal out u [1,6];
         signal in g [1,6];
       end;
       icon bg ellipse
        figures
         ellipse 232 112 248 128 color 0 fill 15132390;
        terminals
         input 232 120 fixed;
         u 248 120 fixed;
         g 240 128 fixed;
       end;
       implementation eq
equations
	u = [(input[1,1] - g[1,1]), (input[1,2] - g[1,2]), (input[1,3] - g[1,3]), (input[1,4] - g[1,4]), (input[1,5] - g[1,5]),(input[1,6] - g[1,6])];						
	
 implementation_end;
     end;
     connections
      g\g_q -> Sum2\g;
      Kd\output -> Sum1\q_dot;
      Kp\output -> Sum1\q_tilde;
      q -> Splitter1\input;
      q_d -> Sum\q_d;
      q_dot -> Kd\input;
      Splitter1\output -> g\q;
      Splitter1\output -> Sum\q 304 256 40 256;
      Sum\q_tilde -> Kp\input;
      Sum1\output -> Sum2\input;
      Sum2\u -> u;
     end;
     figures
      text 'q_tilde' 88 104 color 0 9;
    implementation_end;
   qd 592 424
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate></Description></Information>';
    type 'Submodel-Equation'
     ports
      signal out q_d [1,6];
    end;
    implementation eq
parameters 
	real q_d1 = 0;
	real q_d2 = 0;
	real q_d3 = 0;
	real q_d4 = 0;
	real q_d5 = 0;
	real q_d6 = 0;
	
equations
	// start typing here
	
	q_d = [q_d1, q_d2, q_d3, q_d4,	q_d5, q_d6];
 	implementation_end;
   Se7 1192 32
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\Se-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:25</TimeStamp>
</Description>';
    type 'Se-3'
     ports
      power out p [3,1];
     restrictions
      causality fixed out p;
    end;
    icon bg ellipse bottom
     figures
      text 'Se' 1192 32 color 0 18 bold;
    end;
    implementation eq
parameters
	real effort[3,1] = [1.0; 1.0; 1.0];
variables
	real flow [3];
equations
	p.e = effort; 
	flow = p.f;
implementation_end;
   Se8 1192 0
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\3D\Se-3.emx</LibraryPath>
  <TimeStamp>2007-9-25 12:11:25</TimeStamp>
</Description>';
    type 'Se-3'
     ports
      power out p [3,1];
     restrictions
      causality fixed out p;
    end;
    icon bg ellipse bottom
     figures
      text 'Se' 1192 0 color 0 18 bold;
    end;
    implementation eq
parameters
	real effort[3,1] = [1.0; 1.0; 1.0];
variables
	real flow [3];
equations
	p.e = effort; 
	flow = p.f;
implementation_end;
   Sf_v -112 0
    description '<Information><Description><Version>4.2</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\Sf.emx</LibraryPath><TimeStamp>2011-11-29 16:38:03</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
    type Sf
     ports
      power out p [3,1];
     restrictions
      causality fixed in p;
    end;
    icon bg ellipse bottom
     figures
      text 'Sf' -112 0 color 0 18 bold;
    end;
    implementation eq
parameters
	real flow[3,1] = [0; 0; 0];
variables
	real effort[3,1];
equations
	p.f = flow;
	effort = p.e;
implementation_end;
   Sf_ω -112 32
    description '<Information><Description><Version>4.2</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Bond Graph\Sf.emx</LibraryPath><TimeStamp>2011-11-29 16:38:03</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate></Description></Information>';
    type Sf
     ports
      power out p [3,1];
     restrictions
      causality fixed in p;
    end;
    icon bg ellipse bottom
     figures
      text 'Sf' -112 32 color 0 18 bold;
    end;
    implementation eq
parameters
	real flow[3,1] = [0; 0; 0];
variables
	real effort[3,1];
equations
	p.f = flow;
	effort = p.e;
implementation_end;
   ZeroJunction1 1152 32
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [3,1];
      signal knot out effort [3,1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg ellipse
     figures
      text '0' 1152 32 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction2 1152 0
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2007-9-27 9:51:43</TimeStamp>
</Description>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [3,1];
      signal knot out effort [3,1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg ellipse
     figures
      text '0' 1152 0 color 0 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   Demux\output1 -> MSe1\effort;
   Demux\output2 -> MSe\effort;
   Demux\output3 -> MSe2\effort;
   Demux\output4 -> MSe3\effort;
   Demux\output5 -> MSe4\effort;
   Demux\output6 -> MSe5\effort;
   FlowSensor1\flow -> Mux1\input1;
   FlowSensor1\p2 => Joint1\θ_dot;
   FlowSensor2\flow -> Mux1\input2;
   FlowSensor2\p2 => Joint2\θ_dot;
   FlowSensor3\flow -> Mux1\input3;
   FlowSensor3\p2 => Joint3\θ_dot;
   FlowSensor4\flow -> Mux1\input4;
   FlowSensor4\p2 => Joint4\θ_dot;
   FlowSensor5\flow -> Mux1\input5;
   FlowSensor5\p2 => Joint5\θ_dot;
   FlowSensor6\flow -> Mux1\input6;
   FlowSensor6\p2 => Joint6\θ_dot;
   HD1\θ_dot_output => FlowSensor1\p1;
   HD2\θ_dot_output => FlowSensor2\p1;
   HD3\θ_dot_output => FlowSensor3\p1;
   HD4\θ_dot_output => FlowSensor4\p1;
   HD5\θ_dot_output => FlowSensor5\p1;
   HD6\θ_dot_output => FlowSensor6\p1;
   Joint1\theta_1 -> Mux\input1;
   Joint1\V_B => Link1\V_A;
   Joint1\ω_B => Link1\ω_A;
   Joint2\theta_2 -> Mux\input2;
   Joint2\V_B => Link2\V_A;
   Joint2\ω_B => Link2\ω_A;
   Joint3\theta_3 -> Mux\input3;
   Joint3\V_B => Link3\V_A;
   Joint3\ω_B => Link3\ω_A;
   Joint4\theta_4 -> Mux\input4;
   Joint4\V_B => Link4\V_A;
   Joint4\ω_B => Link4\ω_A;
   Joint5\theta_5 -> Mux\input5;
   Joint5\V_B => Link5\V_A;
   Joint5\ω_B => Link5\ω_A;
   Joint6\theta_6 -> Mux\input6;
   Joint6\V_B => Link6\V_A;
   Joint6\ω_B => Link6\ω_A;
   Link1\V_B => Joint2\V_A;
   Link1\ω_B => Joint2\ω_A;
   Link2\V_B => Joint3\V_A;
   Link2\ω_B => Joint3\ω_A;
   Link3\V_B => Joint4\V_A;
   Link3\ω_B => Joint4\ω_A;
   Link4\V_B => Joint5\V_A;
   Link4\ω_B => Joint5\ω_A;
   Link5\V_B => Joint6\V_A;
   Link5\ω_B => Joint6\ω_A;
   MSe\p => HD2\θ_dot_input;
   MSe1\p => HD1\θ_dot_input;
   MSe2\p => HD3\θ_dot_input;
   MSe3\p => HD4\θ_dot_input;
   MSe4\p => HD5\θ_dot_input;
   MSe5\p => HD6\θ_dot_input;
   Mux\output -> PD_with_Gravity_Compensation\q;
   Mux1\output -> PD_with_Gravity_Compensation\q_dot;
   OneJunction\p => Joint1\V_A;
   OneJunction1\p => Joint1\ω_A;
   PD_with_Gravity_Compensation\u -> Demux\input;
   qd\q_d -> PD_with_Gravity_Compensation\q_d;
   Se7\p => ZeroJunction1\p;
   Se8\p => ZeroJunction2\p;
   Sf_v\p => OneJunction\p;
   Sf_ω\p => OneJunction1\p;
   ZeroJunction1\p <= Link6\V_B;
   ZeroJunction2\p <= Link6\ω_B;
  end;
  figures
   text 'v
' 96 48 color 0 16;
   text 'ω' 96 -16 color 0 16;
   text 'v
' 272 48 color 0 16;
   text 'ω' 272 -16 color 0 16;
   text 'v
' 456 48 color 0 16;
   text 'ω' 456 -16 color 0 16;
   text 'v
' 648 48 color 0 16;
   text 'ω' 648 -16 color 0 16;
   text 'v
' 848 48 color 0 16;
   text 'ω' 848 -16 color 0 16;
   text 'v
' 1040 48 color 0 16;
   text 'ω' 1040 -16 color 0 16;
 implementation_end;
]]></Sidops>
 </Model>
 <Experiments>
  <DefaultExperiment><![CDATA[Experiment 1]]></DefaultExperiment>
<Experiment>
   <Name>Experiment 1</Name>
   <CreatedBy></CreatedBy>
   <Info></Info>
<ExpData>
 <VersionNumber>5.1</VersionNumber>
 <ModelProperties>
 </ModelProperties>
 <RealTimeSyncTimeUs>1000</RealTimeSyncTimeUs>
 <Variables>
  <Parameters>
   <Variable>
    <Name>g</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>J1</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>0.0 0.0 0.0
0.0 0.0 0.0
0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>J2</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>0.0 0.0 0.0
0.0 0.0 0.0
0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>J3</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>0.0 0.0 0.0
0.0 0.0 0.0
0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>J4</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>0.0 0.0 0.0
0.0 0.0 0.0
0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>J5</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>0.0 0.0 0.0
0.0 0.0 0.0
0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>J6</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>0.0 0.0 0.0
0.0 0.0 0.0
0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Kd</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Kp</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Link1\Gravity_applied\effort</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 -36.297000000000004</Value>
   </Variable>
   <Variable>
    <Name>Link2\Gravity_applied\effort</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 -82.33533000000001</Value>
   </Variable>
   <Variable>
    <Name>Link3\Gravity_applied\effort</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 -22.857300000000002</Value>
   </Variable>
   <Variable>
    <Name>Link4\Gravity_applied\effort</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 -11.005839</Value>
   </Variable>
   <Variable>
    <Name>Link5\Gravity_applied\effort</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 -11.005839</Value>
   </Variable>
   <Variable>
    <Name>Link6\Gravity_applied\effort</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 -1.8432990000000002</Value>
   </Variable>
   <Variable>
    <Name>m1</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>m2</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>m3</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>m4</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>m5</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>m6</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>PD_with_Gravity_Compensation\g\m</Name>
    <Rows>6</Rows>
    <Columns>1</Columns>
    <Value>3.7 8.393 2.33 1.1219 1.1219 0.1879</Value>
   </Variable>
   <Variable>
    <Name>PD_with_Gravity_Compensation\Kd\K</Name>
    <Rows>6</Rows>
    <Columns>6</Columns>
    <Value>0.1 0.0 0.0 0.0 0.0 0.0
0.0 0.1 0.0 0.0 0.0 0.0
0.0 0.0 0.1 0.0 0.0 0.0
0.0 0.0 0.0 0.1 0.0 0.0
0.0 0.0 0.0 0.0 0.1 0.0
0.0 0.0 0.0 0.0 0.0 0.1</Value>
   </Variable>
   <Variable>
    <Name>PD_with_Gravity_Compensation\Kp\K</Name>
    <Rows>6</Rows>
    <Columns>6</Columns>
    <Value>0.1 0.0 0.0 0.0 0.0 0.0
0.0 0.1 0.0 0.0 0.0 0.0
0.0 0.0 0.1 0.0 0.0 0.0
0.0 0.0 0.0 0.1 0.0 0.0
0.0 0.0 0.0 0.0 0.1 0.0
0.0 0.0 0.0 0.0 0.0 0.1</Value>
   </Variable>
  </Parameters>
  <Initials>
   <Variable>
    <Name>HD1\C\phi_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD1\I\state_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD2\C\phi_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD2\I\state_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD3\C\phi_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD3\I\state_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD4\C\phi_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD4\I\state_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD5\C\phi_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD5\I\state_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD6\C\phi_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>HD6\I\state_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Link1\EULER_EQUATIONS\h_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link1\EULER_EQUATIONS\p_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link1\EULER_EQUATIONS\P_OG_0</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 -0.0019300000000000016 0.063549</Value>
   </Variable>
   <Variable>
    <Name>Link1\EULER_EQUATIONS\R_OG_0</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>1.0 0.0 0.0
0.0 6.123233995736766e-17 -1.0
0.0 1.0 6.123233995736766e-17</Value>
   </Variable>
   <Variable>
    <Name>Link2\EULER_EQUATIONS\h_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link2\EULER_EQUATIONS\p_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link2\EULER_EQUATIONS\P_OG_0</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>-0.2125 -0.11336 0.08915900000000002</Value>
   </Variable>
   <Variable>
    <Name>Link2\EULER_EQUATIONS\R_OG_0</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>1.0 0.0 0.0
0.0 6.123233995736766e-17 -1.0
0.0 1.0 6.123233995736766e-17</Value>
   </Variable>
   <Variable>
    <Name>Link3\EULER_EQUATIONS\h_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link3\EULER_EQUATIONS\p_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link3\EULER_EQUATIONS\P_OG_0</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>-0.66725 -0.0265 0.089159</Value>
   </Variable>
   <Variable>
    <Name>Link3\EULER_EQUATIONS\R_OG_0</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>1.0 0.0 0.0
0.0 6.123233995736766e-17 -1.0
0.0 1.0 6.123233995736766e-17</Value>
   </Variable>
   <Variable>
    <Name>Link4\EULER_EQUATIONS\h_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link4\EULER_EQUATIONS\p_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link4\EULER_EQUATIONS\P_OG_0</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>-0.81725 -0.10735 0.072819</Value>
   </Variable>
   <Variable>
    <Name>Link4\EULER_EQUATIONS\R_OG_0</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>1.0 0.0 0.0
0.0 -1.0 -1.2246467991473532e-16
0.0 1.2246467991473532e-16 -1.0</Value>
   </Variable>
   <Variable>
    <Name>Link5\EULER_EQUATIONS\h_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link5\EULER_EQUATIONS\p_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link5\EULER_EQUATIONS\P_OG_0</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>-0.81725 -0.12549000000000002 -0.0036909999999999946</Value>
   </Variable>
   <Variable>
    <Name>Link5\EULER_EQUATIONS\R_OG_0</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>1.0 0.0 0.0
0.0 6.123233995736766e-17 -1.0
0.0 1.0 6.123233995736766e-17</Value>
   </Variable>
   <Variable>
    <Name>Link6\EULER_EQUATIONS\h_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link6\EULER_EQUATIONS\p_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Link6\EULER_EQUATIONS\P_OG_0</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>-0.81725 -0.19029100000000002 -0.005490999999999991</Value>
   </Variable>
   <Variable>
    <Name>Link6\EULER_EQUATIONS\R_OG_0</Name>
    <Rows>3</Rows>
    <Columns>3</Columns>
    <Value>1.0 0.0 0.0
0.0 6.123233995736766e-17 -1.0
0.0 1.0 6.123233995736766e-17</Value>
   </Variable>
   <Variable>
    <Name>Joint1\R_C\x.e_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint1\R_C1\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint1\R_C2\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint2\R_C\x.e_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint2\R_C1\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint2\R_C2\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint3\R_C\x.e_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint3\R_C1\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint3\R_C2\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint4\R_C\x.e_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint4\R_C1\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint4\R_C2\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint5\R_C\x.e_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint5\R_C1\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint5\R_C2\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint6\R_C\x.e_initial</Name>
    <Rows>3</Rows>
    <Columns>1</Columns>
    <Value>0.0 0.0 0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint6\R_C1\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
   <Variable>
    <Name>Joint6\R_C2\x.e_initial</Name>
    <Value>0.0</Value>
   </Variable>
  </Initials>
 </Variables>
 <PlotSpecs>
  <VarNames>
   <VarName>time</VarName>
   <VarName>Link1\EULER_EQUATIONS\P_OG[1]</VarName>
   <VarName>Link1\EULER_EQUATIONS\P_OG[2]</VarName>
   <VarName>Link1\EULER_EQUATIONS\P_OG[3]</VarName>
   <VarName>Link1\EULER_EQUATIONS\R_OG[1,3]</VarName>
   <VarName>Link1\EULER_EQUATIONS\R_OG[2,3]</VarName>
   <VarName>Link1\EULER_EQUATIONS\R_OG[3,3]</VarName>
   <VarName>Link1\EULER_EQUATIONS\R_OG[1,2]</VarName>
   <VarName>Link1\EULER_EQUATIONS\R_OG[2,2]</VarName>
   <VarName>Link1\EULER_EQUATIONS\R_OG[3,2]</VarName>
   <VarName>Link2\EULER_EQUATIONS\P_OG[1]</VarName>
   <VarName>Link2\EULER_EQUATIONS\P_OG[2]</VarName>
   <VarName>Link2\EULER_EQUATIONS\P_OG[3]</VarName>
   <VarName>Link2\EULER_EQUATIONS\R_OG[1,3]</VarName>
   <VarName>Link2\EULER_EQUATIONS\R_OG[2,3]</VarName>
   <VarName>Link2\EULER_EQUATIONS\R_OG[3,3]</VarName>
   <VarName>Link2\EULER_EQUATIONS\R_OG[1,2]</VarName>
   <VarName>Link2\EULER_EQUATIONS\R_OG[2,2]</VarName>
   <VarName>Link2\EULER_EQUATIONS\R_OG[3,2]</VarName>
   <VarName>Joint2\theta_2</VarName>
   <VarName>Joint1\theta_1</VarName>
  </VarNames>
  <Plots>
   <Plot>
    <PlotType>GraphPlot</PlotType>
    <BasePlot>
     <PlotId>1</PlotId>
     <UseWindowsBGColor>false</UseWindowsBGColor>
     <BGColor>16777215</BGColor>
     <PlotIsVisible>true</PlotIsVisible>
     <Solo>false</Solo>
    </BasePlot>
    <Grid>
     <DrawGrid>true</DrawGrid>
     <GridColor>15780518</GridColor>
     <GridBorderLineColor>12624260</GridBorderLineColor>
     <GridZeroLineColor>0</GridZeroLineColor>
     <XTicks>10</XTicks>
     <YTicks>10</YTicks>
     <ZTicks>10</ZTicks>
     <Use3DLook>false</Use3DLook>
    </Grid>
    <PlotBGColor>16777215</PlotBGColor>
    <ShowPlotTitle>true</ShowPlotTitle>
    <TitlePosition>1</TitlePosition>
    <PlotTitle>Plot</PlotTitle>
    <ShowXValues>true</ShowXValues>
    <Fonts>
     <TitleFont>
      <Name>Arial</Name>
      <Height>12</Height>
      <PitchFamily>34</PitchFamily>
      <Weight>400</Weight>
      <Italic>0</Italic>
      <UnderLine>0</UnderLine>
      <StrikeOut>0</StrikeOut>
      <Color>0</Color>
     </TitleFont>
     <LabelFont>
      <Name>Arial</Name>
      <Height>12</Height>
      <PitchFamily>34</PitchFamily>
      <Weight>400</Weight>
      <Italic>0</Italic>
      <UnderLine>0</UnderLine>
      <StrikeOut>0</StrikeOut>
      <Color>0</Color>
     </LabelFont>
     <ValuesFont>
      <Name>Arial</Name>
      <Height>10</Height>
      <PitchFamily>34</PitchFamily>
      <Weight>400</Weight>
      <Italic>0</Italic>
      <UnderLine>0</UnderLine>
      <StrikeOut>0</StrikeOut>
      <Color>0</Color>
     </ValuesFont>
     <LegendFont>
      <Name>Arial</Name>
      <Height>12</Height>
      <PitchFamily>34</PitchFamily>
      <Weight>400</Weight>
      <Italic>0</Italic>
      <UnderLine>0</UnderLine>
      <StrikeOut>0</StrikeOut>
      <Color>0</Color>
     </LegendFont>
    </Fonts>
    <SharedXAxis>true</SharedXAxis>
    <SharedYAxis>true</SharedYAxis>
    <SharedZAxis>false</SharedZAxis>
    <XAxes>
     <Axis>
      <Minimum>0.0</Minimum>
      <Maximum>0.23155482650784126</Maximum>
      <Linear>true</Linear>
      <Scaling>3</Scaling>
      <Label>time</Label>
     </Axis>
    </XAxes>
    <YAxes>
     <Axis>
      <Minimum>-3.5</Minimum>
      <Maximum>1.5</Maximum>
      <Linear>true</Linear>
      <Scaling>2</Scaling>
      <Label>theta_2</Label>
     </Axis>
     <Axis>
      <Minimum>-0.02</Minimum>
      <Maximum>0.18</Maximum>
      <Linear>true</Linear>
      <Scaling>2</Scaling>
      <Label>theta_1</Label>
     </Axis>
    </YAxes>
    <ZAxes>
    </ZAxes>
    <Curves>
     <Curve>
      <LineColor>6076255</LineColor>
      <LineStyle>1</LineStyle>
      <TickColor>6076255</TickColor>
      <TickStyle>0</TickStyle>
      <CurveVisible>true</CurveVisible>
      <PixelThresshold>1</PixelThresshold>
      <LineThickness>2</LineThickness>
      <LineOrder>1</LineOrder>
      <ShowYValues>true</ShowYValues>
      <XCurveData>
       <ShowUnit>true</ShowUnit>
       <VarName>time</VarName>
      </XCurveData>
      <YCurveData>
       <ShowUnit>true</ShowUnit>
       <VarName>Joint2\theta_2</VarName>
      </YCurveData>
     </Curve>
     <Curve>
      <LineColor>3355111</LineColor>
      <LineStyle>1</LineStyle>
      <TickColor>3355111</TickColor>
      <TickStyle>0</TickStyle>
      <CurveVisible>true</CurveVisible>
      <PixelThresshold>1</PixelThresshold>
      <LineThickness>2</LineThickness>
      <LineOrder>1</LineOrder>
      <ShowYValues>true</ShowYValues>
      <XCurveData>
       <ShowUnit>true</ShowUnit>
       <VarName>time</VarName>
      </XCurveData>
      <YCurveData>
       <ShowUnit>true</ShowUnit>
       <VarName>Joint1\theta_1</VarName>
      </YCurveData>
     </Curve>
    </Curves>
    <Legenda>
     <ShowLegenda>true</ShowLegenda>
     <BorderPenColor>0</BorderPenColor>
     <BackgroundColor>16777215</BackgroundColor>
    </Legenda>
   </Plot>
   <Plot>
    <PlotType>D3DPlot</PlotType>
    <BasePlot>
     <PlotId>2</PlotId>
     <UseWindowsBGColor>false</UseWindowsBGColor>
     <BGColor>16777215</BGColor>
     <PlotIsVisible>true</PlotIsVisible>
     <Solo>false</Solo>
    </BasePlot>
    <PlotTitle>3D Animation</PlotTitle>
    <RenderQuality>137</RenderQuality>
    <ShowGrid>true</ShowGrid>
    <ShowFPS>false</ShowFPS>
    <BackgroundColor>4294967295</BackgroundColor>
    <SceneBackgroundImage>Gradients\BlueWhite.png</SceneBackgroundImage>
    <ApplyTextureBackground>true</ApplyTextureBackground>
    <FrameScale>1.0</FrameScale>
    <FrameThickness>1.0</FrameThickness>
    <MainFrame>
     <Frame>
      <ScaleValue>
       <X>
        <Value>1</Value>
       </X>
       <Y>
        <Value>1</Value>
       </Y>
       <Z>
        <Value>1</Value>
       </Z>
      </ScaleValue>
      <ShowReferenceFrame>true</ShowReferenceFrame>
      <Name>Reference Frame</Name>
      <Position>
      </Position>
      <Orientation>
       <Angles>
       </Angles>
       <OrientationType>Bryant</OrientationType>
      </Orientation>
      <LockX>false</LockX>
      <LockY>false</LockY>
      <LockZ>false</LockZ>
      <LockXPitch>false</LockXPitch>
      <LockYYaw>false</LockYYaw>
      <LockZRoll>false</LockZRoll>
      <Childs>
       <Frame>
        <ScaleValue>
         <X>
          <Value>1</Value>
         </X>
         <Y>
          <Value>1</Value>
         </Y>
         <Z>
          <Value>1</Value>
         </Z>
        </ScaleValue>
        <ShowReferenceFrame>false</ShowReferenceFrame>
        <Name>Default Lights and Cameras</Name>
        <Position>
        </Position>
        <Orientation>
         <Angles>
         </Angles>
         <OrientationType>Bryant</OrientationType>
        </Orientation>
        <LockX>false</LockX>
        <LockY>false</LockY>
        <LockZ>false</LockZ>
        <LockXPitch>false</LockXPitch>
        <LockYYaw>false</LockYYaw>
        <LockZRoll>false</LockZRoll>
        <Childs>
         <Light>
          <ShowReferenceFrame>false</ShowReferenceFrame>
          <Name>Ambient</Name>
          <Position>
          </Position>
          <Orientation>
           <ZAxis>
            <Z>
             <Value>1</Value>
            </Z>
           </ZAxis>
           <YAxis>
            <Y>
             <Value>1</Value>
            </Y>
           </YAxis>
           <OrientationType>Direct3D</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
          <LightType>0</LightType>
          <LightColor>
           <Color>
            <X>
             <Value>0.3</Value>
            </X>
            <Y>
             <Value>0.3</Value>
            </Y>
            <Z>
             <Value>0.3</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </LightColor>
          <AmbientLight>
           <Color>
            <X>
             <Value>0.3</Value>
            </X>
            <Y>
             <Value>0.3</Value>
            </Y>
            <Z>
             <Value>0.3</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </AmbientLight>
          <AmbientOn>true</AmbientOn>
          <DiffuseOn>false</DiffuseOn>
          <SpecularOn>false</SpecularOn>
         </Light>
         <Light>
          <ShowReferenceFrame>false</ShowReferenceFrame>
          <Name>Parallel</Name>
          <Position>
           <X>
            <Value>-3</Value>
           </X>
           <Y>
            <Value>5</Value>
           </Y>
           <Z>
            <Value>3</Value>
           </Z>
          </Position>
          <Orientation>
           <ZAxis>
            <X>
             <Value>0.457495704067041</Value>
            </X>
            <Y>
             <Value>-0.762492859979951</Value>
            </Y>
            <Z>
             <Value>-0.457495704067041</Value>
            </Z>
           </ZAxis>
           <YAxis>
            <X>
             <Value>0.235379603289675</Value>
            </X>
            <Y>
             <Value>-0.392299348750231</Value>
            </Y>
            <Z>
             <Value>0.889211821404405</Value>
            </Z>
           </YAxis>
           <OrientationType>Direct3D</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
          <LightType>3</LightType>
          <LightColor>
           <Color>
            <X>
             <Value>0.5</Value>
            </X>
            <Y>
             <Value>0.5</Value>
            </Y>
            <Z>
             <Value>0.5</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </LightColor>
          <Attenuation>
           <Constant>
            <Value>1.0</Value>
           </Constant>
           <Linear>
            <Value>0.0</Value>
           </Linear>
           <Quadratic>
            <Value>0.0</Value>
           </Quadratic>
          </Attenuation>
          <DiffuseLight>
           <Color>
            <X>
             <Value>0.5</Value>
            </X>
            <Y>
             <Value>0.5</Value>
            </Y>
            <Z>
             <Value>0.5</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </DiffuseLight>
          <SpecularLight>
           <Color>
            <X>
             <Value>0.5</Value>
            </X>
            <Y>
             <Value>0.5</Value>
            </Y>
            <Z>
             <Value>0.5</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </SpecularLight>
          <AmbientOn>false</AmbientOn>
          <DiffuseOn>true</DiffuseOn>
          <SpecularOn>true</SpecularOn>
         </Light>
         <Light>
          <ShowReferenceFrame>false</ShowReferenceFrame>
          <Name>Spot Light 1</Name>
          <Position>
           <X>
            <Value>-3</Value>
           </X>
           <Y>
            <Value>-5</Value>
           </Y>
           <Z>
            <Value>1</Value>
           </Z>
          </Position>
          <Orientation>
           <ZAxis>
            <X>
             <Value>0.50709255283711</Value>
            </X>
            <Y>
             <Value>0.845154254728517</Value>
            </Y>
            <Z>
             <Value>-0.169030850945703</Value>
            </Z>
           </ZAxis>
           <YAxis>
            <X>
             <Value>0.0869656553478673</Value>
            </X>
            <Y>
             <Value>0.144942758913112</Value>
            </Y>
            <Z>
             <Value>0.985610760609162</Value>
            </Z>
           </YAxis>
           <OrientationType>Direct3D</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
          <LightType>2</LightType>
          <LightColor>
           <Color>
            <X>
             <Value>0.5</Value>
            </X>
            <Y>
             <Value>0.5</Value>
            </Y>
            <Z>
             <Value>0.5</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </LightColor>
          <Attenuation>
           <Constant>
            <Value>1.0</Value>
           </Constant>
           <Linear>
            <Value>0.05</Value>
           </Linear>
           <Quadratic>
            <Value>0.05</Value>
           </Quadratic>
          </Attenuation>
          <Umbra>
           <Value>1.0471975511965976</Value>
          </Umbra>
          <Penumbra>
           <Value>1.0471975511965976</Value>
          </Penumbra>
          <SpotExponent>0.0</SpotExponent>
          <DiffuseLight>
           <Color>
            <X>
             <Value>0.5</Value>
            </X>
            <Y>
             <Value>0.5</Value>
            </Y>
            <Z>
             <Value>0.5</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </DiffuseLight>
          <SpecularLight>
           <Color>
            <X>
             <Value>0.5</Value>
            </X>
            <Y>
             <Value>0.5</Value>
            </Y>
            <Z>
             <Value>0.5</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </SpecularLight>
          <AmbientOn>false</AmbientOn>
          <DiffuseOn>true</DiffuseOn>
          <SpecularOn>true</SpecularOn>
         </Light>
         <Light>
          <ShowReferenceFrame>false</ShowReferenceFrame>
          <Name>Spot Light 2</Name>
          <Position>
           <X>
            <Value>2</Value>
           </X>
           <Y>
            <Value>-3</Value>
           </Y>
           <Z>
            <Value>-1</Value>
           </Z>
          </Position>
          <Orientation>
           <ZAxis>
            <X>
             <Value>-0.534522496597273</Value>
            </X>
            <Y>
             <Value>0.801783715093586</Value>
            </Y>
            <Z>
             <Value>0.267261248298637</Value>
            </Z>
           </ZAxis>
           <YAxis>
            <X>
             <Value>0.148249867750411</Value>
            </X>
            <Y>
             <Value>-0.222374801625616</Value>
            </Y>
            <Z>
             <Value>0.963624109450336</Value>
            </Z>
           </YAxis>
           <OrientationType>Direct3D</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
          <LightType>2</LightType>
          <LightColor>
           <Color>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </LightColor>
          <Attenuation>
           <Constant>
            <Value>1.0</Value>
           </Constant>
           <Linear>
            <Value>0.05</Value>
           </Linear>
           <Quadratic>
            <Value>0.05</Value>
           </Quadratic>
          </Attenuation>
          <Umbra>
           <Value>1.5707963267948966</Value>
          </Umbra>
          <Penumbra>
           <Value>1.5707963267948966</Value>
          </Penumbra>
          <SpotExponent>0.0</SpotExponent>
          <DiffuseLight>
           <Color>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </DiffuseLight>
          <SpecularLight>
           <Color>
            <X>
             <Value>0.5</Value>
            </X>
            <Y>
             <Value>0.5</Value>
            </Y>
            <Z>
             <Value>0.5</Value>
            </Z>
           </Color>
           <Offset>
           </Offset>
           <Multipliers>
            <X>
             <Value>1</Value>
            </X>
            <Y>
             <Value>1</Value>
            </Y>
            <Z>
             <Value>1</Value>
            </Z>
           </Multipliers>
           <Direct3DColorRange>true</Direct3DColorRange>
          </SpecularLight>
          <AmbientOn>false</AmbientOn>
          <DiffuseOn>true</DiffuseOn>
          <SpecularOn>true</SpecularOn>
         </Light>
         <Camera>
          <ShowReferenceFrame>false</ShowReferenceFrame>
          <Name>Camera Looking at Origin</Name>
          <Position>
           <X>
            <Value>-1.79565893672625</Value>
           </X>
           <Y>
            <Value>-0.697130874581533</Value>
           </Y>
           <Z>
            <Value>0.630382314338428</Value>
           </Z>
          </Position>
          <Orientation>
           <ZAxis>
            <X>
             <Value>0.885974236309945</Value>
            </X>
            <Y>
             <Value>0.343962857926264</Value>
            </Y>
            <Z>
             <Value>-0.311029267050878</Value>
            </Z>
           </ZAxis>
           <YAxis>
            <X>
             <Value>0.289945106854785</Value>
            </X>
            <Y>
             <Value>0.112565741101035</Value>
            </Y>
            <Z>
             <Value>0.950400330882383</Value>
            </Z>
           </YAxis>
           <OrientationType>Direct3D</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
          <FrontPlane>0.01</FrontPlane>
          <BackPlane>100.0</BackPlane>
          <AutoFrontBack>true</AutoFrontBack>
          <Field>0.003926990816987242</Field>
          <Fieldy>45.0</Fieldy>
          <PlaneLeft>-10.0</PlaneLeft>
          <PlaneRight>10.0</PlaneRight>
          <PlaneTop>10.0</PlaneTop>
          <PlaneBottom>-10.0</PlaneBottom>
          <UseLookatPosition>true</UseLookatPosition>
          <LookatPosition>
          </LookatPosition>
          <UseAlwaysLookUp>true</UseAlwaysLookUp>
          <LookUpVector>
           <Z>
            <Value>1</Value>
           </Z>
          </LookUpVector>
          <RightHand>true</RightHand>
          <Perspective>true</Perspective>
          <IsSelectedCamera>true</IsSelectedCamera>
         </Camera>
         <Camera>
          <ShowReferenceFrame>false</ShowReferenceFrame>
          <Name>Front(XY)-Camera</Name>
          <Position>
           <Z>
            <Value>10</Value>
           </Z>
          </Position>
          <Orientation>
           <ZAxis>
            <Z>
             <Value>-1</Value>
            </Z>
           </ZAxis>
           <YAxis>
            <Y>
             <Value>1</Value>
            </Y>
           </YAxis>
           <OrientationType>Direct3D</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
          <FrontPlane>0.01</FrontPlane>
          <BackPlane>100.0</BackPlane>
          <AutoFrontBack>true</AutoFrontBack>
          <Field>9.999999999999998</Field>
          <Fieldy>45.0</Fieldy>
          <PlaneLeft>-9.999999999999998</PlaneLeft>
          <PlaneRight>9.999999999999998</PlaneRight>
          <PlaneTop>9.999999999999998</PlaneTop>
          <PlaneBottom>-9.999999999999998</PlaneBottom>
          <UseLookatPosition>true</UseLookatPosition>
          <LookatPosition>
          </LookatPosition>
          <UseAlwaysLookUp>true</UseAlwaysLookUp>
          <LookUpVector>
           <Y>
            <Value>1</Value>
           </Y>
          </LookUpVector>
          <RightHand>true</RightHand>
          <Perspective>false</Perspective>
          <IsSelectedCamera>false</IsSelectedCamera>
         </Camera>
         <Camera>
          <ShowReferenceFrame>false</ShowReferenceFrame>
          <Name>Side(YZ)-Camera</Name>
          <Position>
           <X>
            <Value>10</Value>
           </X>
          </Position>
          <Orientation>
           <ZAxis>
            <X>
             <Value>-1</Value>
            </X>
           </ZAxis>
           <YAxis>
            <Z>
             <Value>1</Value>
            </Z>
           </YAxis>
           <OrientationType>Direct3D</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
          <FrontPlane>0.01</FrontPlane>
          <BackPlane>100.0</BackPlane>
          <AutoFrontBack>true</AutoFrontBack>
          <Field>9.999999999999998</Field>
          <Fieldy>45.0</Fieldy>
          <PlaneLeft>-9.999999999999998</PlaneLeft>
          <PlaneRight>9.999999999999998</PlaneRight>
          <PlaneTop>9.999999999999998</PlaneTop>
          <PlaneBottom>-9.999999999999998</PlaneBottom>
          <UseLookatPosition>true</UseLookatPosition>
          <LookatPosition>
          </LookatPosition>
          <UseAlwaysLookUp>true</UseAlwaysLookUp>
          <LookUpVector>
           <Z>
            <Value>1</Value>
           </Z>
          </LookUpVector>
          <RightHand>true</RightHand>
          <Perspective>false</Perspective>
          <IsSelectedCamera>false</IsSelectedCamera>
         </Camera>
         <Camera>
          <ShowReferenceFrame>false</ShowReferenceFrame>
          <Name>Top(XZ)-Camera</Name>
          <Position>
           <Y>
            <Value>10</Value>
           </Y>
          </Position>
          <Orientation>
           <ZAxis>
            <Y>
             <Value>-1</Value>
            </Y>
           </ZAxis>
           <YAxis>
            <X>
             <Value>1</Value>
            </X>
           </YAxis>
           <OrientationType>Direct3D</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
          <FrontPlane>0.01</FrontPlane>
          <BackPlane>100.0</BackPlane>
          <AutoFrontBack>true</AutoFrontBack>
          <Field>9.999999999999998</Field>
          <Fieldy>45.0</Fieldy>
          <PlaneLeft>-9.999999999999998</PlaneLeft>
          <PlaneRight>9.999999999999998</PlaneRight>
          <PlaneTop>9.999999999999998</PlaneTop>
          <PlaneBottom>-9.999999999999998</PlaneBottom>
          <UseLookatPosition>true</UseLookatPosition>
          <LookatPosition>
          </LookatPosition>
          <UseAlwaysLookUp>true</UseAlwaysLookUp>
          <LookUpVector>
           <X>
            <Value>1</Value>
           </X>
          </LookUpVector>
          <RightHand>true</RightHand>
          <Perspective>false</Perspective>
          <IsSelectedCamera>false</IsSelectedCamera>
         </Camera>
        </Childs>
       </Frame>
       <Frame>
        <ScaleValue>
         <X>
          <Value>1</Value>
         </X>
         <Y>
          <Value>1</Value>
         </Y>
         <Z>
          <Value>1</Value>
         </Z>
        </ScaleValue>
        <ShowReferenceFrame>false</ShowReferenceFrame>
        <Name>Scenery</Name>
        <Position>
        </Position>
        <Orientation>
         <Angles>
         </Angles>
         <OrientationType>Bryant</OrientationType>
        </Orientation>
        <LockX>false</LockX>
        <LockY>false</LockY>
        <LockZ>false</LockZ>
        <LockXPitch>false</LockXPitch>
        <LockYYaw>false</LockYYaw>
        <LockZRoll>false</LockZRoll>
        <Childs>
         <Frame>
          <ScaleValue>
           <X>
            <Value>0.4</Value>
           </X>
           <Y>
            <Value>0.4</Value>
           </Y>
           <Z>
            <Value>0.4</Value>
           </Z>
          </ScaleValue>
          <ShowReferenceFrame>true</ShowReferenceFrame>
          <Name>FF1</Name>
          <Position>
           <X>
            <VariableName>Link1\EULER_EQUATIONS\P_OG[1]</VariableName>
            <Value>-2.9462220481097463e-4</Value>
           </X>
           <Y>
            <VariableName>Link1\EULER_EQUATIONS\P_OG[2]</VariableName>
            <Value>-0.0019073798431621723</Value>
           </Y>
           <Z>
            <VariableName>Link1\EULER_EQUATIONS\P_OG[3]</VariableName>
            <Value>0.063549</Value>
           </Z>
          </Position>
          <Orientation>
           <ZAxis>
            <X>
             <VariableName>Link1\EULER_EQUATIONS\R_OG[1,3]</VariableName>
             <Value>-0.15265399161800608</Value>
            </X>
            <Y>
             <VariableName>Link1\EULER_EQUATIONS\R_OG[2,3]</VariableName>
             <Value>-0.9882796966664295</Value>
            </Y>
            <Z>
             <VariableName>Link1\EULER_EQUATIONS\R_OG[3,3]</VariableName>
             <Value>6.147452765299466e-17</Value>
            </Z>
           </ZAxis>
           <YAxis>
            <X>
             <VariableName>Link1\EULER_EQUATIONS\R_OG[1,2]</VariableName>
             <Value>8.91351795549789e-18</Value>
            </X>
            <Y>
             <VariableName>Link1\EULER_EQUATIONS\R_OG[2,2]</VariableName>
             <Value>6.082675281386649e-17</Value>
            </Y>
            <Z>
             <VariableName>Link1\EULER_EQUATIONS\R_OG[3,2]</VariableName>
             <Value>1.0</Value>
            </Z>
           </YAxis>
           <OrientationType>Matrix</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
         </Frame>
         <Frame>
          <ScaleValue>
           <X>
            <Value>1</Value>
           </X>
           <Y>
            <Value>1</Value>
           </Y>
           <Z>
            <Value>1</Value>
           </Z>
          </ScaleValue>
          <ShowReferenceFrame>true</ShowReferenceFrame>
          <Name>FF2</Name>
          <Position>
           <X>
            <VariableName>Link2\EULER_EQUATIONS\P_OG[1]</VariableName>
            <Value>-0.1091647127655081</Value>
           </X>
           <Y>
            <VariableName>Link2\EULER_EQUATIONS\P_OG[2]</VariableName>
            <Value>-0.09784229863277456</Value>
           </Y>
           <Z>
            <VariableName>Link2\EULER_EQUATIONS\P_OG[3]</VariableName>
            <Value>0.28025241764377157</Value>
           </Z>
          </Position>
          <Orientation>
           <ZAxis>
            <X>
             <VariableName>Link2\EULER_EQUATIONS\R_OG[1,3]</VariableName>
             <Value>-0.1526539625101743</Value>
            </X>
            <Y>
             <VariableName>Link2\EULER_EQUATIONS\R_OG[2,3]</VariableName>
             <Value>-0.9882797011625516</Value>
            </Y>
            <Z>
             <VariableName>Link2\EULER_EQUATIONS\R_OG[3,3]</VariableName>
             <Value>-4.8198216294539626e-11</Value>
            </Z>
           </ZAxis>
           <YAxis>
            <X>
             <VariableName>Link2\EULER_EQUATIONS\R_OG[1,2]</VariableName>
             <Value>0.8887234319205707</Value>
            </X>
            <Y>
             <VariableName>Link2\EULER_EQUATIONS\R_OG[2,2]</VariableName>
             <Value>-0.13727607385470839</Value>
            </Y>
            <Z>
             <VariableName>Link2\EULER_EQUATIONS\R_OG[3,2]</VariableName>
             <Value>0.437408208773406</Value>
            </Z>
           </YAxis>
           <OrientationType>Matrix</OrientationType>
          </Orientation>
          <LockX>false</LockX>
          <LockY>false</LockY>
          <LockZ>false</LockZ>
          <LockXPitch>false</LockXPitch>
          <LockYYaw>false</LockYYaw>
          <LockZRoll>false</LockZRoll>
          <Childs>
          </Childs>
         </Frame>
        </Childs>
       </Frame>
      </Childs>
     </Frame>
    </MainFrame>
   </Plot>
  </Plots>
  <PlotPanels>
   <PlotPanel>
    <PlotPanelId>1</PlotPanelId>
    <PlotPanelVisible>true</PlotPanelVisible>
    <Name>Window 1</Name>
    <Tiling>0</Tiling>
    <PlotIds>
     <PlotId>1</PlotId>
    </PlotIds>
    <ToggleState>Base</ToggleState>
   </PlotPanel>
   <PlotPanel>
    <PlotPanelId>2</PlotPanelId>
    <PlotPanelVisible>true</PlotPanelVisible>
    <Name>Window 2</Name>
    <Tiling>0</Tiling>
    <PlotIds>
     <PlotId>2</PlotId>
    </PlotIds>
    <ToggleState>Base</ToggleState>
   </PlotPanel>
  </PlotPanels>
  <WindowRectangles virtualDesktopWidth="1920" virtualDesktopHeight="1080">
   <WindowRectangle monitor="0" left="0" top="0" right="1920" bottom="1080" plotpanelid="1">
0.0182292 0.0037037 0.981771 0.988889
   </WindowRectangle>
   <WindowRectangle monitor="0" left="0" top="0" right="1920" bottom="1080" plotpanelid="2">
0.00364583 0.0703704 0.990625 0.975
   </WindowRectangle>
  </WindowRectangles>
 </PlotSpecs>
 <RunSpecs>
  <SimulatorSettings>
   <StartTime>0.0</StartTime>
   <FinishTime>20.0</FinishTime>
   <AllowPassFinishTime>false</AllowPassFinishTime>
   <Warp>false</Warp>
   <SimulationMode>0</SimulationMode>
   <FPGonio>false</FPGonio>
   <UseOutputAfterEach>false</UseOutputAfterEach>
   <OutputAfterEach>0.1</OutputAfterEach>
   <EventEpsilon>1.0e-6</EventEpsilon>
   <AlgebraicTolerance>1.0e-7</AlgebraicTolerance>
   <SteadyStateAnalysis>false</SteadyStateAnalysis>
   <UpdateHoldInstructions>true</UpdateHoldInstructions>
  </SimulatorSettings>
  <IntegrationMethods>
   <IntegrationMethod>
    <Name>Euler</Name>
    <StepSize>0.01</StepSize>
    <AutoStepSize>false</AutoStepSize>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>BackwardEuler</Name>
    <AbsoluteTolerance>1.0e-5</AbsoluteTolerance>
    <RelativeTolerance>1.0e-5</RelativeTolerance>
    <AlgebraicAbsoluteTolerance>1.0e-5</AlgebraicAbsoluteTolerance>
    <AlgebraicRelativeTolerance>1.0e-5</AlgebraicRelativeTolerance>
    <StepSize>0.01</StepSize>
    <Alpha>1.0</Alpha>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>AdamsBashforth</Name>
    <StepSize>0.01</StepSize>
    <AutoStepSize>false</AutoStepSize>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>RungeKutta2</Name>
    <StepSize>0.01</StepSize>
    <AutoStepSize>false</AutoStepSize>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>RungeKutta4</Name>
    <StepSize>0.01</StepSize>
    <AutoStepSize>false</AutoStepSize>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>RungeKutta8</Name>
    <UseInitialStepSize>false</UseInitialStepSize>
    <InitialStepSize>0.0</InitialStepSize>
    <UseMaximumStepSize>false</UseMaximumStepSize>
    <MaximumStepSize>0.0</MaximumStepSize>
    <AbsoluteTolerance>1.0e-6</AbsoluteTolerance>
    <RelativeTolerance>1.0e-6</RelativeTolerance>
    <SafetyFactor>0.9</SafetyFactor>
    <Factor1>0.33</Factor1>
    <Factor2>6.0</Factor2>
    <Beta>0.0</Beta>
    <UseMaxNrSteps>false</UseMaxNrSteps>
    <MaxNrSteps>100000</MaxNrSteps>
    <UseStiffDetection>false</UseStiffDetection>
    <MaxNrStiffnessSteps>1000</MaxNrStiffnessSteps>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>RungeKuttaFehlberg</Name>
    <UseInitialStepSize>false</UseInitialStepSize>
    <InitialStepSize>0.0</InitialStepSize>
    <UseMaximumStepSize>false</UseMaximumStepSize>
    <MaximumStepSize>0.0</MaximumStepSize>
    <AbsoluteTolerance>1.0e-6</AbsoluteTolerance>
    <RelativeTolerance>1.0e-6</RelativeTolerance>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>VodeAdams</Name>
    <UseInitialStepSize>false</UseInitialStepSize>
    <InitialStepSize>0.0</InitialStepSize>
    <UseMaximumStepSize>false</UseMaximumStepSize>
    <MaximumStepSize>0.0</MaximumStepSize>
    <AbsoluteTolerance>1.0e-6</AbsoluteTolerance>
    <RelativeTolerance>1.0e-6</RelativeTolerance>
    <VodeUseBDF>true</VodeUseBDF>
    <VodeUseNewton>true</VodeUseNewton>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>BDFMethod</Name>
    <AbsoluteTolerance>1.0e-5</AbsoluteTolerance>
    <RelativeTolerance>1.0e-5</RelativeTolerance>
    <AlgebraicAbsoluteTolerance>1.0e-5</AlgebraicAbsoluteTolerance>
    <AlgebraicRelativeTolerance>1.0e-5</AlgebraicRelativeTolerance>
    <UseInitialStepSize>false</UseInitialStepSize>
    <InitialStepSize>0.0</InitialStepSize>
    <UseMaximumStepSize>false</UseMaximumStepSize>
    <MaximumStepSize>0.0</MaximumStepSize>
   </IntegrationMethod>
   <IntegrationMethod>
    <Name>MeBDFiMethod</Name>
    <AbsoluteTolerance>1.0e-5</AbsoluteTolerance>
    <RelativeTolerance>1.0e-5</RelativeTolerance>
    <AlgebraicAbsoluteTolerance>1.0e-5</AlgebraicAbsoluteTolerance>
    <AlgebraicRelativeTolerance>1.0e-5</AlgebraicRelativeTolerance>
    <UseInitialStepSize>false</UseInitialStepSize>
    <InitialStepSize>0.0</InitialStepSize>
    <UseMaximumStepSize>false</UseMaximumStepSize>
    <MaximumStepSize>0.0</MaximumStepSize>
   </IntegrationMethod>
   <SelectedIntegrationMethod>9</SelectedIntegrationMethod>
  </IntegrationMethods>
 </RunSpecs>
 <MultipleRun>
  <NrSteps>10</NrSteps>
  <CopyFromStates>false</CopyFromStates>
  <JoinParameterVariation>true</JoinParameterVariation>
  <ClearAfterRun>true</ClearAfterRun>
  <RedrawAfterRun>false</RedrawAfterRun>
  <DrawDuringSimulation>true</DrawDuringSimulation>
  <ActionBeforeOptimization>0</ActionBeforeOptimization>
  <CompareValue>0.0</CompareValue>
  <UseCompareValue>true</UseCompareValue>
  <MultipleRunType>MultipleRun</MultipleRunType>
  <Minimize>true</Minimize>
  <OptimizationVariable></OptimizationVariable>
  <ResulVarUsage>UseEndValue</ResulVarUsage>
  <Tolerance>0.001</Tolerance>
  <OptimizationMethod>BroydonFletcherGoldfarbShanno</OptimizationMethod>
  <MultipleRunVariables>
  </MultipleRunVariables>
 </MultipleRun>
 <ExportData>
  <WriteAsText>true</WriteAsText>
  <ReadAsText>true</ReadAsText>
  <WriteHeader>true</WriteHeader>
  <ReadHeader>true</ReadHeader>
  <ReadFilename></ReadFilename>
  <WriteFilename></WriteFilename>
  <DoWrite>false</DoWrite>
  <ExportVariables>
  </ExportVariables>
  <ImportVariables>
  </ImportVariables>
 </ExportData>
 <BreakPoints>
 </BreakPoints>
</ExpData>
  </Experiment>
</Experiments>
</Document>
